<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF--8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jarelux - Gesti√≥n de Tratamiento Oncol√≥gico (Doctor)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #1e40af 0%, #1e40af 100%);
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <header class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-4 py-6">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-12 h-12  flex items-center justify-center p-1">
                        <img src="1000217146 (1).png" alt="Logo de Jarelux" class="w-full h-full object-contain">
                    </div>
                    <div>
                        <h1 class="text-3xl font-bold">Jarelux</h1>
                        <p class="text-blue-100">Gesti√≥n de Tratamiento Oncol√≥gico</p>
                    </div>
                </div>
                <div id="userInfo" class="hidden">
                    <span id="userName" class="mr-4"></span>
                    <button onclick="logout()" class="bg-white text-blue-600 px-4 py-2 rounded-lg hover:bg-blue-50">
                        Cerrar Sesi√≥n
                    </button>
                </div>
            </div>
        </div>
    </header>

    <div id="loginScreen" class="min-h-screen flex items-center justify-center p-4">
        <div class="max-w-md w-full">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold text-gray-800 mb-4">Bienvenido a Jarelux</h2>
                <p class="text-xl text-gray-600">Acceso para personal m√©dico</p>
            </div>
            
            <div class="flex justify-center">
                <div class="bg-white rounded-xl shadow-lg p-8 card-hover cursor-pointer" onclick="showLogin('doctor')">
                    <div class="text-center">
                        <div class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6">
                            <span class="text-4xl">üë®‚Äç‚öïÔ∏è</span>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-800 mb-4">Doctor / Administrador</h3>
                        <p class="text-gray-600 mb-6">Gestiona pacientes, citas y tratamientos m√©dicos</p>
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <p class="text-sm text-blue-700">‚Ä¢ Control de pacientes</p>
                            <p class="text-sm text-blue-700">‚Ä¢ Consultas virtuales</p>
                            <p class="text-sm text-blue-700">‚Ä¢ Estad√≠sticas m√©dicas</p>
                        </div>
                    </div>
                </div>
            </div>
            <BR>  
                <div class="flex justify-center">
                    <button onclick="window.location.href='index.html';" class="bg-gradient-to-r from-blue-500 to-blue-500 text-white font-bold py-3 px-6 rounded-lg shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 mb-4">
                        volver  
                    </button>
                </div>
            </BR>
        </div>
    </div>

    <div id="loginForm" class="hidden min-h-screen flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-lg p-8 w-full max-w-md">
            <div class="text-center mb-8">
                <h3 id="loginTitle" class="text-2xl font-bold text-gray-800 mb-2"></h3>
                <p class="text-gray-600">Ingresa tus credenciales</p>
            </div>
            
            <form onsubmit="handleLogin(event)">
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Usuario</label>
                    <input type="text" id="username" class="w-full px-4 py-3 border rounded-lg focus:outline-none focus:border-blue-500" placeholder="Ingresa tu usuario" required>
                </div>
                
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Contrase√±a</label>
                    <input type="password" id="password" class="w-full px-4 py-3 border rounded-lg focus:outline-none focus:border-blue-500" placeholder="Ingresa tu contrase√±a" required>
                </div>
                
                <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition duration-300">
                    Iniciar Sesi√≥n
                </button>
            </form>
            
            <button onclick="backToSelection()" class="w-full mt-4 text-gray-600 hover:text-gray-800">
                ‚Üê Volver
            </button>
        </div>
    </div>

    <div id="doctorDashboard" class="hidden">
        <div class="container mx-auto px-4 py-8">
            <nav class="bg-white rounded-lg shadow-md mb-8">
                <div class="flex flex-wrap justify-center space-x-1 p-2">
                    <button onclick="showDoctorSection('overview')" class="doctor-nav-btn bg-blue-600 text-white px-4 py-2 rounded-lg m-1">Resumen</button>
                    <button onclick="showDoctorSection('patients')" class="doctor-nav-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg m-1">üë§Pacientes</button>
                    <button onclick="showDoctorSection('appointments')" class="doctor-nav-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg m-1">üìÜCitas</button>
                    <button onclick="showDoctorSection('consultations')" class="doctor-nav-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg m-1">ü•ºConsultas</button>
                    <button onclick="showDoctorSection('prescriptions')" class="doctor-nav-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg m-1">üíäRecetas</button>
                    <button onclick="showDoctorSection('chat')" class="doctor-nav-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg m-1">üí¨Chat</button>
                    <button onclick="showDoctorSection('statistics')" class="doctor-nav-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg m-1">üìäEstad√≠sticas</button>
                </div>
            </nav>

            <div id="doctor-overview" class="doctor-section">
                <div class="grid md:grid-cols-4 gap-6 mb-8">
                    <div class="bg-white p-6 rounded-lg shadow-md card-hover">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center">
                                <span class="text-2xl">üë•</span>
                            </div>
                            <div class="ml-4">
                                <p class="text-gray-600">Pacientes Activos</p>
                                <p class="text-2xl font-bold text-gray-800">245</p>
                                <p class="text-xs text-green-600">‚Üë +3 este mes</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-lg shadow-md card-hover">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center">
                                <span class="text-2xl">üìÖ</span>
                            </div>
                            <div class="ml-4">
                                <p class="text-gray-600">Citas Hoy</p>
                                <p class="text-2xl font-bold text-gray-800">8</p>
                                <p class="text-xs text-blue-600">6 completadas</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-lg shadow-md card-hover">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center">
                                <span class="text-2xl">üíä</span>
                            </div>
                            <div class="ml-4">
                                <p class="text-gray-600">Recetas Activas</p>
                                <p class="text-2xl font-bold text-gray-800">18</p>
                                <p class="text-xs text-orange-600">5 por renovar</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-lg shadow-md card-hover">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center">
                                <span class="text-2xl">üö®</span>
                            </div>
                            <div class="ml-4">
                                <p class="text-gray-600">Casos Urgentes</p>
                                <p class="text-2xl font-bold text-gray-800">2</p>
                                <p class="text-xs text-red-600">Requieren atenci√≥n</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="grid md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-bold mb-4">Estado de Pacientes</h3>
                        <div class="relative h-64">
                            <canvas id="patientStatusOverviewChart"></canvas>
                        </div>
                        <div class="mt-4 grid grid-cols-2 gap-2 text-sm">
                            <div class="flex items-center">
                                <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                                <span>Estable: 12</span>
                            </div>
                            <div class="flex items-center">
                                <div class="w-3 h-3 bg-yellow-500 rounded-full mr-2"></div>
                                <span>Tratamiento: 8</span>
                            </div>
                            <div class="flex items-center">
                                <div class="w-3 h-3 bg-blue-500 rounded-full mr-2"></div>
                                <span>Seguimiento: 3</span>
                            </div>
                            <div class="flex items-center">
                                <div class="w-3 h-3 bg-red-500 rounded-full mr-2"></div>
                                <span>Cr√≠tico: 1</span>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-bold mb-4">Tipos de C√°ncer</h3>
                        <div class="relative h-64">
                            <canvas id="cancerTypesChart"></canvas>
                        </div>
                        <div class="mt-4 space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span>üéóÔ∏è Mama</span>
                                <span class="font-semibold">7 (33%)</span>
                            </div>
                            <div class="flex justify-between">
                                <span>ü´Å Pulm√≥n</span>
                                <span class="font-semibold">5 (25%)</span>
                            </div>
                            <div class="flex justify-between">
                                <span>ü©∏ Pr√≥stata</span>
                                <span class="font-semibold">7 (21%)</span>
                            </div>
                            <div class="flex justify-between">
                                <span>üß¨ Otros</span>
                                <span class="font-semibold">5 (21%)</span>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-bold mb-4">Progreso de Tratamientos</h3>
                        <div class="space-y-4">
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span>Quimioterapia</span>
                                    <span>12/15 pacientes</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-blue-600 h-2 rounded-full" style="width: 80%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span>Radioterapia</span>
                                    <span>8/10 pacientes</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-green-600 h-2 rounded-full" style="width: 80%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span>Inmunoterapia</span>
                                    <span>5/6 pacientes</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-purple-600 h-2 rounded-full" style="width: 83%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span>Hormonoterapia</span>
                                    <span>4/5 pacientes</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-pink-600 h-2 rounded-full" style="width: 80%"></div>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4 p-3 bg-green-50 rounded-lg">
                            <p class="text-sm text-green-800">
                                <span class="font-semibold">Tasa de √©xito:</span> 85% de pacientes muestran mejor√≠a
                            </p>
                        </div>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-6 mb-8">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-bold mb-4">Tendencias Mensuales</h3>
                        <div class="relative h-64">
                            <canvas id="monthlyTrendsChart"></canvas>
                        </div>
                        <div class="mt-4 grid grid-cols-3 gap-4 text-center">
                            <div class="p-2 bg-blue-50 rounded">
                                <p class="text-sm text-gray-600">Nuevos Pacientes</p>
                                <p class="text-lg font-bold text-blue-600">+7</p>
                            </div>
                            <div class="p-2 bg-green-50 rounded">
                                <p class="text-sm text-gray-600">Altas M√©dicas</p>
                                <p class="text-lg font-bold text-green-600">+4</p>
                            </div>
                            <div class="p-2 bg-purple-50 rounded">
                                <p class="text-sm text-gray-600">Consultas</p>
                                <p class="text-lg font-bold text-purple-600">156</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-bold mb-4">Demograf√≠a por Edad</h3>
                        <div class="relative h-64">
                            <canvas id="ageDemographicsChart"></canvas>
                        </div>
                        <div class="mt-4 space-y-2">
                            <div class="flex justify-between items-center">
                                <span class="text-sm">üë∂ 20-39 a√±os</span>
                                <div class="flex items-center">
                                    <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                                        <div class="bg-blue-500 h-2 rounded-full" style="width: 25%"></div>
                                    </div>
                                    <span class="text-sm font-semibold">6</span>
                                </div>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm">üë®‚Äçüíº 40-59 a√±os</span>
                                <div class="flex items-center">
                                    <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                                        <div class="bg-green-500 h-2 rounded-full" style="width: 50%"></div>
                                    </div>
                                    <span class="text-sm font-semibold">12</span>
                                </div>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm">üë¥ 60+ a√±os</span>
                                <div class="flex items-center">
                                    <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                                        <div class="bg-purple-500 h-2 rounded-full" style="width: 25%"></div>
                                    </div>
                                    <span class="text-sm font-semibold">6</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-bold mb-4">Pr√≥ximas Citas</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg hover:bg-blue-50 transition-colors">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center mr-3">
                                        <span class="text-sm">üë©</span>
                                    </div>
                                    <div>
                                        <p class="font-semibold">Mar√≠a Gonz√°lez</p>
                                        <p class="text-sm text-gray-600">Consulta de seguimiento</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <span class="text-blue-600 font-semibold">10:00 AM</span>
                                    <p class="text-xs text-gray-500">Sala 2</p>
                                </div>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg hover:bg-blue-50 transition-colors">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-3">
                                        <span class="text-sm">üë®</span>
                                    </div>
                                    <div>
                                        <p class="font-semibold">Carlos Ruiz</p>
                                        <p class="text-sm text-gray-600">Revisi√≥n de tratamiento</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <span class="text-blue-600 font-semibold">11:30 AM</span>
                                    <p class="text-xs text-gray-500">Sala 1</p>
                                </div>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg hover:bg-blue-50 transition-colors">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center mr-3">
                                        <span class="text-sm">üë©</span>
                                    </div>
                                    <div>
                                        <p class="font-semibold">Ana L√≥pez</p>
                                        <p class="text-sm text-gray-600">Quimioterapia</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <span class="text-blue-600 font-semibold">2:00 PM</span>
                                    <p class="text-xs text-gray-500">Sala 3</p>
                                </div>
                            </div>
                        </div>
                        <button onclick="showDoctorSection('appointments')" class="w-full mt-4 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors">
                            Ver Todas las Citas
                        </button>
                    </div>

                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-bold mb-4">Actividad Reciente</h3>
                        <div class="space-y-3">
                            <div class="p-3 bg-blue-50 rounded-lg border-l-4 border-blue-500">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="font-semibold text-blue-800">Ana L√≥pez</p>
                                        <p class="text-sm text-gray-600">Consulta sobre efectos secundarios</p>
                                    </div>
                                    <span class="text-xs text-gray-500">15 min</span>
                                </div>
                            </div>
                            <div class="p-3 bg-green-50 rounded-lg border-l-4 border-green-500">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="font-semibold text-green-800">Pedro Mart√≠n</p>
                                        <p class="text-sm text-gray-600">Reporte de mejor√≠a significativa</p>
                                    </div>
                                    <span class="text-xs text-gray-500">1 hora</span>
                                </div>
                            </div>
                            <div class="p-3 bg-purple-50 rounded-lg border-l-4 border-purple-500">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="font-semibold text-purple-800">Sistema</p>
                                        <p class="text-sm text-gray-600">Recordatorio: Renovar receta de Mar√≠a G.</p>
                                    </div>
                                    <span class="text-xs text-gray-500">2 horas</span>
                                </div>
                            </div>
                            <div class="p-3 bg-yellow-50 rounded-lg border-l-4 border-yellow-500">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="font-semibold text-yellow-800">Carlos Ruiz</p>
                                        <p class="text-sm text-gray-600">Resultados de laboratorio disponibles</p>
                                    </div>
                                    <span class="text-xs text-gray-500">3 horas</span>
                                </div>
                            </div>
                        </div>
                        <button onclick="showDoctorSection('chat')" class="w-full mt-4 bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors">
                            Ver Todos los Mensajes
                        </button>
                    </div>
                </div>
            </div>

            <div id="doctor-patients" class="doctor-section hidden">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold">Gesti√≥n de Pacientes</h3>
                        <button onclick="showAddPatientForm()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                            + Agregar Paciente
                        </button>
                    </div>
                    
                    <div id="addPatientForm" class="hidden mb-6 p-6 bg-gray-50 rounded-lg">
                        <h4 class="text-lg font-bold mb-4">Nuevo Paciente</h4>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium mb-2">Nombre Completo</label>
                                <input type="text" id="patientName" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500" placeholder="Nombre del paciente">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Edad</label>
                                <input type="number" id="patientAge" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500" placeholder="Edad">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Diagn√≥stico</label>
                                <select id="patientDiagnosis" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500">
                                    <option value="">Seleccionar diagn√≥stico</option>
                                    <option value="C√°ncer de mama">C√°ncer de mama</option>
                                    <option value="C√°ncer de pulm√≥n">C√°ncer de pulm√≥n</option>
                                    <option value="C√°ncer de pr√≥stata">C√°ncer de pr√≥stata</option>
                                    <option value="Leucemia">Leucemia</option>
                                    <option value="Linfoma">Linfoma</option>
                                    <option value="Otro">Otro</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Tel√©fono</label>
                                <input type="tel" id="patientPhone" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500" placeholder="N√∫mero de tel√©fono">
                            </div>
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium mb-2">Direcci√≥n</label>
                                <input type="text" id="patientAddress" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500" placeholder="Direcci√≥n completa">
                            </div>
                        </div>
                        <div class="flex space-x-3 mt-4">
                            <button onclick="addPatient()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">
                                Guardar Paciente
                            </button>
                            <button onclick="cancelAddPatient()" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600">
                                Cancelar
                            </button>
                        </div>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-4 py-3 text-left">Nombre</th>
                                    <th class="px-4 py-3 text-left">Edad</th>
                                    <th class="px-4 py-3 text-left">Diagn√≥stico</th>
                                    <th class="px-4 py-3 text-left">Estado</th>
                                    <th class="px-4 py-3 text-left">Tel√©fono</th>
                                    <th class="px-4 py-3 text-left">Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="patientsTableBody" class="divide-y divide-gray-200">
                                <tr>
                                    <td class="px-4 py-3">Mar√≠a Gonz√°lez</td>
                                    <td class="px-4 py-3">45</td>
                                    <td class="px-4 py-3">C√°ncer de mama</td>
                                    <td class="px-4 py-3"><span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-sm">Estable</span></td>
                                    <td class="px-4 py-3">(963) 123-4567</td>
                                    <td class="px-4 py-3">
                                        <button onclick="viewPatient('Mar√≠a Gonz√°lez')" class="text-blue-600 hover:text-blue-800 mr-2">Ver</button>
                                        <button onclick="scheduleAppointment('Mar√≠a Gonz√°lez')" class="text-green-600 hover:text-green-800 mr-2">Cita</button>
                                        <button onclick="editPatient('Mar√≠a Gonz√°lez')" class="text-purple-600 hover:text-purple-800">Editar</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-3">Carlos Ruiz</td>
                                    <td class="px-4 py-3">58</td>
                                    <td class="px-4 py-3">C√°ncer de pulm√≥n</td>
                                    <td class="px-4 py-3"><span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-sm">En tratamiento</span></td>
                                    <td class="px-4 py-3">(963) 987-6543</td>
                                    <td class="px-4 py-3">
                                        <button onclick="viewPatient('Carlos Ruiz')" class="text-blue-600 hover:text-blue-800 mr-2">Ver</button>
                                        <button onclick="scheduleAppointment('Carlos Ruiz')" class="text-green-600 hover:text-green-800 mr-2">Cita</button>
                                        <button onclick="editPatient('Carlos Ruiz')" class="text-purple-600 hover:text-purple-800">Editar</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-3">Ana L√≥pez</td>
                                    <td class="px-4 py-3">62</td>
                                    <td class="px-4 py-3">C√°ncer de pr√≥stata</td>
                                    <td class="px-4 py-3"><span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm">Seguimiento</span></td>
                                    <td class="px-4 py-3">(963) 555-0123</td>
                                    <td class="px-4 py-3">
                                        <button onclick="viewPatient('Ana L√≥pez')" class="text-blue-600 hover:text-blue-800 mr-2">Ver</button>
                                        <button onclick="scheduleAppointment('Ana L√≥pez')" class="text-green-600 hover:text-green-800 mr-2">Cita</button>
                                        <button onclick="editPatient('Ana L√≥pez')" class="text-purple-600 hover:text-purple-800">Editar</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="doctor-statistics" class="doctor-section hidden">
                <div class="grid md:grid-cols-4 gap-6 mb-8">
                    <div class="bg-gradient-to-r from-blue-500 to-blue-600 text-white p-6 rounded-lg shadow-md">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-blue-100 text-sm">Tasa de Supervivencia</p>
                                <p class="text-3xl font-bold">87.5%</p>
                                <p class="text-blue-200 text-xs">‚Üë +2.3% vs mes anterior</p>
                            </div>
                            <div class="text-4xl opacity-80">üìà</div>
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-r from-green-500 to-green-600 text-white p-6 rounded-lg shadow-md">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-green-100 text-sm">Remisi√≥n Completa</p>
                                <p class="text-3xl font-bold">68%</p>
                                <p class="text-green-200 text-xs">‚Üë +5.1% vs mes anterior</p>
                            </div>
                            <div class="text-4xl opacity-80">üéØ</div>
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-r from-purple-500 to-purple-600 text-white p-6 rounded-lg shadow-md">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-purple-100 text-sm">Adherencia Tratamiento</p>
                                <p class="text-3xl font-bold">92%</p>
                                <p class="text-purple-200 text-xs">‚Üë +1.8% vs mes anterior</p>
                            </div>
                            <div class="text-4xl opacity-80">üíä</div>
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-r from-orange-500 to-orange-600 text-white p-6 rounded-lg shadow-md">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-orange-100 text-sm">Satisfacci√≥n Paciente</p>
                                <p class="text-3xl font-bold">9.2/10</p>
                                <p class="text-orange-200 text-xs">‚Üë +0.3 vs mes anterior</p>
                            </div>
                            <div class="text-4xl opacity-80">‚≠ê</div>
                        </div>
                    </div>
                </div>

                <div class="grid md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-bold">Estado de Pacientes</h3>
                            <select class="text-sm border rounded px-2 py-1" onchange="updatePatientStatusChart(this.value)">
                                <option value="current">Actual</option>
                                <option value="6months">√öltimos 6 meses</option>
                                <option value="year">√öltimo a√±o</option>
                            </select>
                        </div>
                        <div class="relative h-64">
                            <canvas id="patientStatusChart"></canvas>
                        </div>
                        <div class="mt-4 grid grid-cols-2 gap-2 text-sm">
                            <div class="flex items-center justify-between p-2 bg-green-50 rounded">
                                <div class="flex items-center">
                                    <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                                    <span>Estable</span>
                                </div>
                                <span class="font-bold">12 (50%)</span>
                            </div>
                            <div class="flex items-center justify-between p-2 bg-yellow-50 rounded">
                                <div class="flex items-center">
                                    <div class="w-3 h-3 bg-yellow-500 rounded-full mr-2"></div>
                                    <span>Tratamiento</span>
                                </div>
                                <span class="font-bold">8 (33%)</span>
                            </div>
                            <div class="flex items-center justify-between p-2 bg-blue-50 rounded">
                                <div class="flex items-center">
                                    <div class="w-3 h-3 bg-blue-500 rounded-full mr-2"></div>
                                    <span>Seguimiento</span>
                                </div>
                                <span class="font-bold">3 (13%)</span>
                            </div>
                            <div class="flex items-center justify-between p-2 bg-red-50 rounded">
                                <div class="flex items-center">
                                    <div class="w-3 h-3 bg-red-500 rounded-full mr-2"></div>
                                    <span>Cr√≠tico</span>
                                </div>
                                <span class="font-bold">1 (4%)</span>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-bold mb-4">Efectividad por Tratamiento</h3>
                        <div class="relative h-64">
                            <canvas id="treatmentEffectivenessChart"></canvas>
                        </div>
                        <div class="mt-4 space-y-2 text-sm">
                            <div class="flex justify-between items-center">
                                <span class="flex items-center">
                                    <div class="w-3 h-3 bg-blue-500 rounded-full mr-2"></div>
                                    Quimioterapia
                                </span>
                                <span class="font-bold">85%</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="flex items-center">
                                    <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                                    Inmunoterapia
                                </span>
                                <span class="font-bold">92%</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="flex items-center">
                                    <div class="w-3 h-3 bg-purple-500 rounded-full mr-2"></div>
                                    Radioterapia
                                </span>
                                <span class="font-bold">78%</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="flex items-center">
                                    <div class="w-3 h-3 bg-pink-500 rounded-full mr-2"></div>
                                    Hormonoterapia
                                </span>
                                <span class="font-bold">88%</span>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-bold mb-4">Tendencias Mensuales</h3>
                        <div class="relative h-64">
                            <canvas id="monthlyTrendsStatsChart"></canvas>
                        </div>
                        <div class="mt-4 grid grid-cols-3 gap-2 text-center">
                            <div class="p-2 bg-blue-50 rounded">
                                <p class="text-xs text-gray-600">Nuevos</p>
                                <p class="text-lg font-bold text-blue-600">+7</p>
                                <p class="text-xs text-green-600">‚Üë 12%</p>
                            </div>
                            <div class="p-2 bg-green-50 rounded">
                                <p class="text-xs text-gray-600">Remisi√≥n</p>
                                <p class="text-lg font-bold text-green-600">+4</p>
                                <p class="text-xs text-green-600">‚Üë 25%</p>
                            </div>
                            <div class="p-2 bg-purple-50 rounded">
                                <p class="text-xs text-gray-600">Consultas</p>
                                <p class="text-lg font-bold text-purple-600">156</p>
                                <p class="text-xs text-green-600">‚Üë 8%</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-6 mb-8">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-bold mb-4">Distribuci√≥n por Tipo y Estadio</h3>
                        <div class="relative h-80">
                            <canvas id="cancerTypesStagesChart"></canvas>
                        </div>
                        <div class="mt-4 grid grid-cols-2 gap-4">
                            <div>
                                <h5 class="font-semibold mb-2">Por Tipo:</h5>
                                <div class="space-y-1 text-sm">
                                    <div class="flex justify-between">
                                        <span>üéóÔ∏è Mama</span>
                                        <span class="font-semibold">8 (33%)</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>ü´Å Pulm√≥n</span>
                                        <span class="font-semibold">6 (25%)</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>ü©∏ Pr√≥stata</span>
                                        <span class="font-semibold">5 (21%)</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>üß¨ Otros</span>
                                        <span class="font-semibold">5 (21%)</span>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h5 class="font-semibold mb-2">Por Estadio:</h5>
                                <div class="space-y-1 text-sm">
                                    <div class="flex justify-between">
                                        <span>Estadio I</span>
                                        <span class="font-semibold">6 (25%)</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>Estadio II</span>
                                        <span class="font-semibold">8 (33%)</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>Estadio III</span>
                                        <span class="font-semibold">7 (29%)</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>Estadio IV</span>
                                        <span class="font-semibold">3 (13%)</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-bold mb-4">Demograf√≠a Detallada</h3>
                        <div class="relative h-80">
                            <canvas id="demographicsChart"></canvas>
                        </div>
                        <div class="mt-4 grid grid-cols-2 gap-4">
                            <div>
                                <h5 class="font-semibold mb-2">Por Edad:</h5>
                                <div class="space-y-2">
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm">üë∂ 20-39 a√±os</span>
                                        <div class="flex items-center">
                                            <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                                                <div class="bg-blue-500 h-2 rounded-full" style="width: 25%"></div>
                                            </div>
                                            <span class="text-sm font-semibold">6</span>
                                        </div>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm">üë®‚Äçüíº 40-59 a√±os</span>
                                        <div class="flex items-center">
                                            <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                                                <div class="bg-green-500 h-2 rounded-full" style="width: 50%"></div>
                                            </div>
                                            <span class="text-sm font-semibold">12</span>
                                        </div>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm">üë¥ 60+ a√±os</span>
                                        <div class="flex items-center">
                                            <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                                                <div class="bg-purple-500 h-2 rounded-full" style="width: 25%"></div>
                                            </div>
                                            <span class="text-sm font-semibold">6</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h5 class="font-semibold mb-2">Por G√©nero:</h5>
                                <div class="space-y-2">
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm">üë© Mujeres</span>
                                        <div class="flex items-center">
                                            <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                                                <div class="bg-pink-500 h-2 rounded-full" style="width: 58%"></div>
                                            </div>
                                            <span class="text-sm font-semibold">14 (58%)</span>
                                        </div>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm">üë® Hombres</span>
                                        <div class="flex items-center">
                                            <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                                                <div class="bg-blue-500 h-2 rounded-full" style="width: 42%"></div>
                                            </div>
                                            <span class="text-sm font-semibold">10 (42%)</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <h5 class="font-semibold mb-2 mt-4">Tiempo Promedio:</h5>
                                <div class="space-y-1 text-sm">
                                    <div class="flex justify-between">
                                        <span>Diagn√≥stico</span>
                                        <span class="font-semibold">8.5 meses</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>Tratamiento</span>
                                        <span class="font-semibold">14.2 meses</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>Seguimiento</span>
                                        <span class="font-semibold">24+ meses</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="grid md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-bold mb-4">Tasas de Respuesta</h3>
                        <div class="space-y-4">
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-sm font-medium">Respuesta Completa</span>
                                    <span class="text-sm font-bold text-green-600">68%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-3">
                                    <div class="bg-green-500 h-3 rounded-full" style="width: 68%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-sm font-medium">Respuesta Parcial</span>
                                    <span class="text-sm font-bold text-blue-600">24%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-3">
                                    <div class="bg-blue-500 h-3 rounded-full" style="width: 24%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-sm font-medium">Enfermedad Estable</span>
                                    <span class="text-sm font-bold text-yellow-600">6%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-3">
                                    <div class="bg-yellow-500 h-3 rounded-full" style="width: 6%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-sm font-medium">Progresi√≥n</span>
                                    <span class="text-sm font-bold text-red-600">2%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-3">
                                    <div class="bg-red-500 h-3 rounded-full" style="width: 2%"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-6 p-4 bg-green-50 rounded-lg">
                            <div class="flex items-center">
                                <span class="text-2xl mr-3">üéØ</span>
                                <div>
                                    <p class="font-semibold text-green-800">Tasa de √âxito Global</p>
                                    <p class="text-2xl font-bold text-green-600">92%</p>
                                    <p class="text-xs text-green-600">Respuesta completa + parcial</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-bold mb-4">Efectos Secundarios</h3>
                        <div class="relative h-48">
                            <canvas id="sideEffectsChart"></canvas>
                        </div>
                        <div class="mt-4 space-y-2 text-sm">
                            <div class="flex justify-between items-center p-2 bg-red-50 rounded">
                                <span>ü§¢ N√°useas/V√≥mitos</span>
                                <span class="font-bold">45%</span>
                            </div>
                            <div class="flex justify-between items-center p-2 bg-orange-50 rounded">
                                <span>üò¥ Fatiga</span>
                                <span class="font-bold">38%</span>
                            </div>
                            <div class="flex justify-between items-center p-2 bg-yellow-50 rounded">
                                <span>ü¶≤ Alopecia</span>
                                <span class="font-bold">32%</span>
                            </div>
                            <div class="flex justify-between items-center p-2 bg-blue-50 rounded">
                                <span>ü©∏ Neutropenia</span>
                                <span class="font-bold">28%</span>
                            </div>
                            <div class="flex justify-between items-center p-2 bg-purple-50 rounded">
                                <span>üî• Mucositis</span>
                                <span class="font-bold">15%</span>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-bold mb-4">Calidad de Vida</h3>
                        <div class="space-y-4">
                            <div class="text-center p-4 bg-gradient-to-r from-green-100 to-blue-100 rounded-lg">
                                <p class="text-3xl font-bold text-green-600">8.4/10</p>
                                <p class="text-sm text-gray-600">Puntuaci√≥n Promedio</p>
                                <p class="text-xs text-green-600">‚Üë +0.6 vs trimestre anterior</p>
                            </div>
                            
                            <div class="space-y-3">
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span>Bienestar F√≠sico</span>
                                        <span class="font-bold">7.8/10</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                        <div class="bg-blue-500 h-2 rounded-full" style="width: 78%"></div>
                                    </div>
                                </div>
                                
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span>Bienestar Emocional</span>
                                        <span class="font-bold">8.2/10</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                        <div class="bg-green-500 h-2 rounded-full" style="width: 82%"></div>
                                    </div>
                                </div>
                                
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span>Funcionalidad Social</span>
                                        <span class="font-bold">8.9/10</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                        <div class="bg-purple-500 h-2 rounded-full" style="width: 89%"></div>
                                    </div>
                                </div>
                                
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span>Bienestar Funcional</span>
                                        <span class="font-bold">8.6/10</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                        <div class="bg-yellow-500 h-2 rounded-full" style="width: 86%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-bold mb-6">An√°lisis Comparativo Anual</h3>
                    <div class="relative h-96">
                        <canvas id="comparativeAnalysisChart"></canvas>
                    </div>
                    <div class="mt-6 grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div class="text-center p-4 bg-blue-50 rounded-lg">
                            <p class="text-2xl font-bold text-blue-600">2024</p>
                            <p class="text-sm text-gray-600">A√±o Actual</p>
                            <p class="text-xs text-green-600">‚Üë 15% mejora</p>
                        </div>
                        <div class="text-center p-4 bg-gray-50 rounded-lg">
                            <p class="text-2xl font-bold text-gray-600">2023</p>
                            <p class="text-sm text-gray-600">A√±o Anterior</p>
                            <p class="text-xs text-blue-600">Base comparativa</p>
                        </div>
                        <div class="text-center p-4 bg-green-50 rounded-lg">
                            <p class="text-2xl font-bold text-green-600">+12%</p>
                            <p class="text-sm text-gray-600">Supervivencia</p>
                            <p class="text-xs text-green-600">vs promedio nacional</p>
                        </div>
                        <div class="text-center p-4 bg-purple-50 rounded-lg">
                            <p class="text-2xl font-bold text-purple-600">-8%</p>
                            <p class="text-sm text-gray-600">Efectos Adversos</p>
                            <p class="text-xs text-green-600">vs a√±o anterior</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="doctor-appointments" class="doctor-section hidden">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold">Gesti√≥n de Citas</h3>
                        <button onclick="showNewAppointmentForm()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                            + Nueva Cita
                        </button>
                    </div>

                    <div id="newAppointmentForm" class="hidden mb-6 p-6 bg-gray-50 rounded-lg">
                        <h4 class="text-lg font-bold mb-4">Programar Nueva Cita</h4>
                        <div class="grid md:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium mb-2">Paciente</label>
                                <select id="appointmentPatient" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500">
                                    <option value="">Seleccionar paciente</option>
                                    <option value="Mar√≠a Gonz√°lez">Mar√≠a Gonz√°lez</option>
                                    <option value="Carlos Ruiz">Carlos Ruiz</option>
                                    <option value="Ana L√≥pez">Ana L√≥pez</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Fecha</label>
                                <input type="date" id="appointmentDate" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Hora</label>
                                <input type="time" id="appointmentTime" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Tipo de Cita</label>
                                <select id="appointmentType" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500">
                                    <option value="">Seleccionar tipo</option>
                                    <option value="Consulta de seguimiento">Consulta de seguimiento</option>
                                    <option value="Revisi√≥n de tratamiento">Revisi√≥n de tratamiento</option>
                                    <option value="Quimioterapia">Quimioterapia</option>
                                    <option value="Radioterapia">Radioterapia</option>
                                    <option value="Ex√°menes">Ex√°menes</option>
                                </select>
                            </div>
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium mb-2">Notas</label>
                                <input type="text" id="appointmentNotes" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500" placeholder="Notas adicionales">
                            </div>
                        </div>
                        <div class="flex space-x-3 mt-4">
                            <button onclick="saveAppointment()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">
                                Guardar Cita
                            </button>
                            <button onclick="cancelNewAppointment()" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600">
                                Cancelar
                            </button>
                        </div>
                    </div>

                    <div class="mb-6">
                        <div class="flex justify-between items-center mb-4">
                            <h4 class="text-lg font-bold">Calendario de Citas</h4>
                            <div class="flex space-x-2">
                                <button onclick="changeCalendarView('day')" class="calendar-view-btn bg-blue-600 text-white px-3 py-1 rounded text-sm">D√≠a</button>
                                <button onclick="changeCalendarView('week')" class="calendar-view-btn bg-gray-200 text-gray-700 px-3 py-1 rounded text-sm">Semana</button>
                                <button onclick="changeCalendarView('month')" class="calendar-view-btn bg-gray-200 text-gray-700 px-3 py-1 rounded text-sm">Mes</button>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-7 gap-1 mb-4">
                            <div class="bg-gray-100 p-2 text-center font-semibold">Dom</div>
                            <div class="bg-gray-100 p-2 text-center font-semibold">Lun</div>
                            <div class="bg-gray-100 p-2 text-center font-semibold">Mar</div>
                            <div class="bg-gray-100 p-2 text-center font-semibold">Mi√©</div>
                            <div class="bg-gray-100 p-2 text-center font-semibold">Jue</div>
                            <div class="bg-gray-100 p-2 text-center font-semibold">Vie</div>
                            <div class="bg-gray-100 p-2 text-center font-semibold">S√°b</div>
                            
                            <div class="border p-2 h-20 text-sm">1</div>
                            <div class="border p-2 h-20 text-sm">2</div>
                            <div class="border p-2 h-20 text-sm">3</div>
                            <div class="border p-2 h-20 text-sm">4</div>
                            <div class="border p-2 h-20 text-sm">5</div>
                            <div class="border p-2 h-20 text-sm">6</div>
                            <div class="border p-2 h-20 text-sm">7</div>
                            <div class="border p-2 h-20 text-sm">8</div>
                            <div class="border p-2 h-20 text-sm">9</div>
                            <div class="border p-2 h-20 text-sm">10</div>
                            <div class="border p-2 h-20 text-sm">11</div>
                            <div class="border p-2 h-20 text-sm">12</div>
                            <div class="border p-2 h-20 text-sm">13</div>
                            <div class="border p-2 h-20 text-sm">14</div>
                            <div class="border p-2 h-20 text-sm bg-blue-50">
                                15
                                <div class="text-xs bg-blue-200 rounded p-1 mt-1">Mar√≠a G. 10:00</div>
                            </div>
                            <div class="border p-2 h-20 text-sm bg-green-50">
                                16
                                <div class="text-xs bg-green-200 rounded p-1 mt-1">Carlos R. 11:30</div>
                            </div>
                            <div class="border p-2 h-20 text-sm">17</div>
                            <div class="border p-2 h-20 text-sm bg-yellow-50">
                                18
                                <div class="text-xs bg-yellow-200 rounded p-1 mt-1">Ana L. 14:00</div>
                            </div>
                        </div>
                    </div>

                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-4 py-3 text-left">Fecha</th>
                                    <th class="px-4 py-3 text-left">Hora</th>
                                    <th class="px-4 py-3 text-left">Paciente</th>
                                    <th class="px-4 py-3 text-left">Tipo</th>
                                    <th class="px-4 py-3 text-left">Estado</th>
                                    <th class="px-4 py-3 text-left">Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="appointmentsTableBody" class="divide-y divide-gray-200">
                                <tr>
                                    <td class="px-4 py-3">15 Dic 2024</td>
                                    <td class="px-4 py-3">10:00 AM</td>
                                    <td class="px-4 py-3">Mar√≠a Gonz√°lez</td>
                                    <td class="px-4 py-3">Consulta de seguimiento</td>
                                    <td class="px-4 py-3"><span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm">Programada</span></td>
                                    <td class="px-4 py-3">
                                        <button onclick="startConsultation('Mar√≠a Gonz√°lez')" class="text-green-600 hover:text-green-800 mr-2">Iniciar</button>
                                        <button onclick="rescheduleAppointment('Mar√≠a Gonz√°lez')" class="text-blue-600 hover:text-blue-800 mr-2">Reprogramar</button>
                                        <button onclick="cancelAppointment('Mar√≠a Gonz√°lez')" class="text-red-600 hover:text-red-800">Cancelar</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-3">16 Dic 2024</td>
                                    <td class="px-4 py-3">11:30 AM</td>
                                    <td class="px-4 py-3">Carlos Ruiz</td>
                                    <td class="px-4 py-3">Revisi√≥n de tratamiento</td>
                                    <td class="px-4 py-3"><span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm">Programada</span></td>
                                    <td class="px-4 py-3">
                                        <button onclick="startConsultation('Carlos Ruiz')" class="text-green-600 hover:text-green-800 mr-2">Iniciar</button>
                                        <button onclick="rescheduleAppointment('Carlos Ruiz')" class="text-blue-600 hover:text-blue-800 mr-2">Reprogramar</button>
                                        <button onclick="cancelAppointment('Carlos Ruiz')" class="text-red-600 hover:text-red-800">Cancelar</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-3">18 Dic 2024</td>
                                    <td class="px-4 py-3">2:00 PM</td>
                                    <td class="px-4 py-3">Ana L√≥pez</td>
                                    <td class="px-4 py-3">Quimioterapia</td>
                                    <td class="px-4 py-3"><span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-sm">Confirmada</span></td>
                                    <td class="px-4 py-3">
                                        <button onclick="startConsultation('Ana L√≥pez')" class="text-green-600 hover:text-green-800 mr-2">Iniciar</button>
                                        <button onclick="rescheduleAppointment('Ana L√≥pez')" class="text-blue-600 hover:text-blue-800 mr-2">Reprogramar</button>
                                        <button onclick="cancelAppointment('Ana L√≥pez')" class="text-red-600 hover:text-red-800">Cancelar</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="doctor-consultations" class="doctor-section hidden">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold">Consultas Virtuales y Presenciales</h3>
                        <button onclick="showConsultationOptions()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                            + Nueva Consulta
                        </button>
                    </div>

                    <div id="consultationOptions" class="hidden mb-6 p-6 bg-gray-50 rounded-lg">
                        <h4 class="text-lg font-bold mb-4">Tipo de Consulta</h4>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div onclick="selectConsultationType('virtual')" class="cursor-pointer border-2 border-gray-200 rounded-lg p-6 hover:border-blue-500 hover:bg-blue-50 transition-all">
                                <div class="text-center">
                                    <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                        <span class="text-3xl">üíª</span>
                                    </div>
                                    <h5 class="text-xl font-bold mb-2">Consulta Virtual</h5>
                                    <p class="text-gray-600 mb-4">Videollamada con el paciente</p>
                                    <ul class="text-sm text-gray-500 text-left">
                                        <li>‚Ä¢ Acceso desde cualquier lugar</li>
                                        <li>‚Ä¢ Grabaci√≥n de la sesi√≥n</li>
                                        <li>‚Ä¢ Compartir pantalla</li>
                                        <li>‚Ä¢ Chat integrado</li>
                                    </ul>
                                </div>
                            </div>

                            <div onclick="selectConsultationType('presencial')" class="cursor-pointer border-2 border-gray-200 rounded-lg p-6 hover:border-green-500 hover:bg-green-50 transition-all">
                                <div class="text-center">
                                    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                        <span class="text-3xl">üè•</span>
                                    </div>
                                    <h5 class="text-xl font-bold mb-2">Consulta Presencial</h5>
                                    <p class="text-gray-600 mb-4">Cita en el consultorio</p>
                                    <ul class="text-sm text-gray-500 text-left">
                                        <li>‚Ä¢ Examen f√≠sico completo</li>
                                        <li>‚Ä¢ Procedimientos m√©dicos</li>
                                        <li>‚Ä¢ An√°lisis de laboratorio</li>
                                        <li>‚Ä¢ Seguimiento directo</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="text-center mt-4">
                            <button onclick="cancelConsultationSelection()" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600">
                                Cancelar
                            </button>
                        </div>
                    </div>

                    <div id="virtualConsultationSetup" class="hidden mb-6 p-6 bg-blue-50 rounded-lg border border-blue-200">
                        <h4 class="text-lg font-bold mb-4 text-blue-800">Configurar Consulta Virtual</h4>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium mb-2">Paciente</label>
                                <select id="virtualPatient" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500">
                                    <option value="">Seleccionar paciente</option>
                                    <option value="Mar√≠a Gonz√°lez">Mar√≠a Gonz√°lez</option>
                                    <option value="Carlos Ruiz">Carlos Ruiz</option>
                                    <option value="Ana L√≥pez">Ana L√≥pez</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Duraci√≥n (minutos)</label>
                                <select id="consultationDuration" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500">
                                    <option value="30">30 minutos</option>
                                    <option value="45">45 minutos</option>
                                    <option value="60">60 minutos</option>
                                </select>
                            </div>
                        </div>
                        <div class="flex space-x-3 mt-4">
                            <button onclick="startVirtualConsultation()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                                üé• Iniciar Videollamada
                            </button>
                            <button onclick="scheduleVirtualConsultation()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">
                                üìÖ Programar para despu√©s
                            </button>
                            <button onclick="cancelVirtualSetup()" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600">
                                Cancelar
                            </button>
                        </div>
                    </div>

                    <div id="presencialConsultationSetup" class="hidden mb-6 p-6 bg-green-50 rounded-lg border border-green-200">
                        <h4 class="text-lg font-bold mb-4 text-green-800">Configurar Consulta Presencial</h4>
                        <div class="grid md:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium mb-2">Paciente</label>
                                <select id="presencialPatient" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-green-500">
                                    <option value="">Seleccionar paciente</option>
                                    <option value="Mar√≠a Gonz√°lez">Mar√≠a Gonz√°lez</option>
                                    <option value="Carlos Ruiz">Carlos Ruiz</option>
                                    <option value="Ana L√≥pez">Ana L√≥pez</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Consultorio</label>
                                <select id="consultationRoom" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-green-500">
                                    <option value="Consultorio 1">Consultorio 1</option>
                                    <option value="Consultorio 2">Consultorio 2</option>
                                    <option value="Sala de procedimientos">Sala de procedimientos</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Tipo de consulta</label>
                                <select id="presencialType" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-green-500">
                                    <option value="Consulta general">Consulta general</option>
                                    <option value="Seguimiento">Seguimiento</option>
                                    <option value="Procedimiento">Procedimiento</option>
                                    <option value="Ex√°menes">Ex√°menes</option>
                                </select>
                            </div>
                        </div>
                        <div class="flex space-x-3 mt-4">
                            <button onclick="startPresencialConsultation()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">
                                üè• Iniciar Consulta
                            </button>
                            <button onclick="schedulePresencialConsultation()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                                üìÖ Programar Cita
                            </button>
                            <button onclick="cancelPresencialSetup()" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600">
                                Cancelar
                            </button>
                        </div>
                    </div>

                    <div class="mb-6">
                        <h4 class="text-lg font-bold mb-4">Consultas Activas</h4>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="border border-blue-200 rounded-lg p-4 bg-blue-50">
                                <div class="flex justify-between items-center mb-2">
                                    <h5 class="font-semibold text-blue-800">üíª Consulta Virtual</h5>
                                    <span class="bg-blue-600 text-white px-2 py-1 rounded-full text-xs">En curso</span>
                                </div>
                                <p class="text-sm text-gray-600 mb-2">Mar√≠a Gonz√°lez - Seguimiento oncol√≥gico</p>
                                <p class="text-xs text-gray-500 mb-3">Iniciada: 10:00 AM - Duraci√≥n: 25 min</p>
                                <div class="flex space-x-2">
                                    <button onclick="joinVirtualConsultation('Mar√≠a Gonz√°lez')" class="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                        Unirse
                                    </button>
                                    <button onclick="endConsultation('Mar√≠a Gonz√°lez')" class="bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700">
                                        Finalizar
                                    </button>
                                </div>
                            </div>

                            <div class="border border-green-200 rounded-lg p-4 bg-green-50">
                                <div class="flex justify-between items-center mb-2">
                                    <h5 class="font-semibold text-green-800">üè• Consulta Presencial</h5>
                                    <span class="bg-green-600 text-white px-2 py-1 rounded-full text-xs">Programada</span>
                                </div>
                                <p class="text-sm text-gray-600 mb-2">Carlos Ruiz - Revisi√≥n de tratamiento</p>
                                <p class="text-xs text-gray-500 mb-3">Programada: 11:30 AM - Consultorio 1</p>
                                <div class="flex space-x-2">
                                    <button onclick="startPresencialNow('Carlos Ruiz')" class="bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700">
                                        Iniciar
                                    </button>
                                    <button onclick="postponeConsultation('Carlos Ruiz')" class="bg-yellow-600 text-white px-3 py-1 rounded text-sm hover:bg-yellow-700">
                                        Posponer
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h4 class="text-lg font-bold mb-4">Historial de Consultas</h4>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-4 py-3 text-left">Fecha</th>
                                        <th class="px-4 py-3 text-left">Paciente</th>
                                        <th class="px-4 py-3 text-left">Tipo</th>
                                        <th class="px-4 py-3 text-left">Duraci√≥n</th>
                                        <th class="px-4 py-3 text-left">Estado</th>
                                        <th class="px-4 py-3 text-left">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-200">
                                    <tr>
                                        <td class="px-4 py-3">14 Dic 2024</td>
                                        <td class="px-4 py-3">Ana L√≥pez</td>
                                        <td class="px-4 py-3">üíª Virtual</td>
                                        <td class="px-4 py-3">45 min</td>
                                        <td class="px-4 py-3"><span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-sm">Completada</span></td>
                                        <td class="px-4 py-3">
                                            <button onclick="viewConsultationNotes('Ana L√≥pez')" class="text-blue-600 hover:text-blue-800 mr-2">Ver notas</button>
                                            <button onclick="downloadRecording('Ana L√≥pez')" class="text-green-600 hover:text-green-800">Grabaci√≥n</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-3">13 Dic 2024</td>
                                        <td class="px-4 py-3">Carlos Ruiz</td>
                                        <td class="px-4 py-3">üè• Presencial</td>
                                        <td class="px-4 py-3">60 min</td>
                                        <td class="px-4 py-3"><span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-sm">Completada</span></td>
                                        <td class="px-4 py-3">
                                            <button onclick="viewConsultationNotes('Carlos Ruiz')" class="text-blue-600 hover:text-blue-800 mr-2">Ver notas</button>
                                            <button onclick="viewExamResults('Carlos Ruiz')" class="text-purple-600 hover:text-purple-800">Resultados</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <div id="doctor-prescriptions" class="doctor-section hidden">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold">Gesti√≥n de Recetas Oncol√≥gicas</h3>
                        <button onclick="showNewPrescriptionForm()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                            + Nueva Receta
                        </button>
                    </div>

                    <div id="newPrescriptionForm" class="hidden mb-6 p-6 bg-gray-50 rounded-lg">
                        <h4 class="text-lg font-bold mb-4">Nueva Receta Oncol√≥gica</h4>
                        <div class="grid md:grid-cols-2 gap-4 mb-4">
                            <div>
                                <label class="block text-sm font-medium mb-2">Paciente</label>
                                <select id="prescriptionPatient" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500">
                                    <option value="">Seleccionar paciente</option>
                                    <option value="Mar√≠a Gonz√°lez">Mar√≠a Gonz√°lez</option>
                                    <option value="Carlos Ruiz">Carlos Ruiz</option>
                                    <option value="Ana L√≥pez">Ana L√≥pez</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Tipo de Tratamiento</label>
                                <select id="treatmentType" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500">
                                    <option value="">Seleccionar tipo</option>
                                    <option value="Quimioterapia">Quimioterapia</option>
                                    <option value="Terapia dirigida">Terapia dirigida</option>
                                    <option value="Inmunoterapia">Inmunoterapia</option>
                                    <option value="Hormonoterapia">Hormonoterapia</option>
                                    <option value="Medicamentos de soporte">Medicamentos de soporte</option>
                                </select>
                            </div>
                        </div>

                        <div class="mb-4">
                            <label class="block text-sm font-medium mb-2">Medicamentos</label>
                            <div id="medicationList" class="space-y-3">
                                <div class="medication-item grid grid-cols-5 gap-2 p-3 bg-white rounded border">
                                    <select class="medication-select px-2 py-1 border rounded text-sm">
                                        <option value="">Seleccionar medicamento</option>
                                        <option value="Ciclofosfamida">Ciclofosfamida</option>
                                        <option value="Doxorrubicina">Doxorrubicina</option>
                                        <option value="Paclitaxel">Paclitaxel</option>
                                        <option value="Carboplatin">Carboplatin</option>
                                        <option value="Trastuzumab">Trastuzumab</option>
                                        <option value="Tamoxifeno">Tamoxifeno</option>
                                        <option value="Ondansetr√≥n">Ondansetr√≥n</option>
                                        <option value="Dexametasona">Dexametasona</option>
                                    </select>
                                    <input type="text" placeholder="Dosis" class="px-2 py-1 border rounded text-sm">
                                    <select class="px-2 py-1 border rounded text-sm">
                                        <option value="mg">mg</option>
                                        <option value="ml">ml</option>
                                        <option value="UI">UI</option>
                                        <option value="mcg">mcg</option>
                                    </select>
                                    <input type="text" placeholder="Frecuencia" class="px-2 py-1 border rounded text-sm">
                                    <button type="button" onclick="removeMedication(this)" class="bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600">
                                        ‚úï
                                    </button>
                                </div>
                            </div>
                            <button type="button" onclick="addMedicationRow()" class="mt-2 bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700">
                                + Agregar Medicamento
                            </button>
                        </div>

                        <div class="grid md:grid-cols-2 gap-4 mb-4">
                            <div>
                                <label class="block text-sm font-medium mb-2">Duraci√≥n del Tratamiento</label>
                                <input type="text" id="treatmentDuration" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500" placeholder="Ej: 6 ciclos, 21 d√≠as cada uno">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Fecha de Inicio</label>
                                <input type="date" id="treatmentStartDate" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500">
                            </div>
                        </div>

                        <div class="mb-4">
                            <label class="block text-sm font-medium mb-2">Instrucciones Especiales</label>
                            <textarea id="specialInstructions" rows="3" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500" placeholder="Instrucciones adicionales, precauciones, efectos secundarios a vigilar..."></textarea>
                        </div>

                        <div class="flex space-x-3">
                            <button onclick="savePrescription()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">
                                üíæ Guardar Receta
                            </button>
                            <button onclick="generatePrescriptionPDF()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                                üìÑ Generar PDF
                            </button>
                            <button onclick="cancelNewPrescription()" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600">
                                Cancelar
                            </button>
                        </div>
                    </div>

                    <div class="mb-6">
                        <h4 class="text-lg font-bold mb-4">Recetas Activas</h4>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="border rounded-lg p-4 bg-blue-50 border-blue-200">
                                <div class="flex justify-between items-start mb-3">
                                    <div>
                                        <h5 class="font-semibold text-blue-800">Mar√≠a Gonz√°lez</h5>
                                        <p class="text-sm text-gray-600">C√°ncer de mama - Estadio II</p>
                                        <p class="text-xs text-gray-500">Iniciado: 1 Dic 2024</p>
                                    </div>
                                    <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">Activa</span>
                                </div>
                                
                                <div class="space-y-2 mb-3">
                                    <div class="bg-white p-2 rounded text-sm">
                                        <p class="font-medium">üß™ Quimioterapia AC-T</p>
                                        <p class="text-gray-600">‚Ä¢ Doxorrubicina 60mg/m¬≤ IV - D√≠a 1</p>
                                        <p class="text-gray-600">‚Ä¢ Ciclofosfamida 600mg/m¬≤ IV - D√≠a 1</p>
                                        <p class="text-xs text-blue-600">Ciclo 2 de 4 (cada 21 d√≠as)</p>
                                    </div>
                                    <div class="bg-white p-2 rounded text-sm">
                                        <p class="font-medium">üíä Medicamentos de Soporte</p>
                                        <p class="text-gray-600">‚Ä¢ Ondansetr√≥n 8mg c/8h PRN n√°usea</p>
                                        <p class="text-gray-600">‚Ä¢ Dexametasona 12mg pre-quimio</p>
                                    </div>
                                </div>
                                
                                <div class="flex space-x-2">
                                    <button onclick="viewFullPrescription('Mar√≠a Gonz√°lez')" class="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                        Ver Completa
                                    </button>
                                    <button onclick="modifyPrescription('Mar√≠a Gonz√°lez')" class="bg-yellow-600 text-white px-3 py-1 rounded text-sm hover:bg-yellow-700">
                                        Modificar
                                    </button>
                                    <button onclick="printPrescription('Mar√≠a Gonz√°lez')" class="bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700">
                                        Imprimir
                                    </button>
                                </div>
                            </div>

                            <div class="border rounded-lg p-4 bg-orange-50 border-orange-200">
                                <div class="flex justify-between items-start mb-3">
                                    <div>
                                        <h5 class="font-semibold text-orange-800">Carlos Ruiz</h5>
                                        <p class="text-sm text-gray-600">C√°ncer de pulm√≥n - Estadio IIIA</p>
                                        <p class="text-xs text-gray-500">Iniciado: 28 Nov 2024</p>
                                    </div>
                                    <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs">En revisi√≥n</span>
                                </div>
                                
                                <div class="space-y-2 mb-3">
                                    <div class="bg-white p-2 rounded text-sm">
                                        <p class="font-medium">üéØ Terapia Dirigida</p>
                                        <p class="text-gray-600">‚Ä¢ Pembrolizumab 200mg IV c/3 semanas</p>
                                        <p class="text-xs text-blue-600">Ciclo 1 de 6</p>
                                    </div>
                                    <div class="bg-white p-2 rounded text-sm">
                                        <p class="font-medium">üíä Medicamentos de Soporte</p>
                                        <p class="text-gray-600">‚Ä¢ Prednisolona 20mg VO diario</p>
                                        <p class="text-gray-600">‚Ä¢ Omeprazol 40mg VO en ayunas</p>
                                    </div>
                                </div>
                                
                                <div class="flex space-x-2">
                                    <button onclick="viewFullPrescription('Carlos Ruiz')" class="bg-orange-600 text-white px-3 py-1 rounded text-sm hover:bg-orange-700">
                                        Ver Completa
                                    </button>
                                    <button onclick="modifyPrescription('Carlos Ruiz')" class="bg-yellow-600 text-white px-3 py-1 rounded text-sm hover:bg-yellow-700">
                                        Modificar
                                    </button>
                                    <button onclick="printPrescription('Carlos Ruiz')" class="bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700">
                                        Imprimir
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h4 class="text-lg font-bold mb-4">Historial de Recetas</h4>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-4 py-3 text-left">Fecha</th>
                                        <th class="px-4 py-3 text-left">Paciente</th>
                                        <th class="px-4 py-3 text-left">Tipo de Tratamiento</th>
                                        <th class="px-4 py-3 text-left">Medicamentos Principales</th>
                                        <th class="px-4 py-3 text-left">Estado</th>
                                        <th class="px-4 py-3 text-left">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-200">
                                    <tr>
                                        <td class="px-4 py-3">1 Dic 2024</td>
                                        <td class="px-4 py-3">Mar√≠a Gonz√°lez</td>
                                        <td class="px-4 py-3">Quimioterapia AC-T</td>
                                        <td class="px-4 py-3">Doxorrubicina, Ciclofosfamida</td>
                                        <td class="px-4 py-3"><span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-sm">Activa</span></td>
                                        <td class="px-4 py-3">
                                            <button onclick="viewPrescriptionDetails('Mar√≠a Gonz√°lez', '1 Dic 2024')" class="text-blue-600 hover:text-blue-800 mr-2">Ver</button>
                                            <button onclick="duplicatePrescription('Mar√≠a Gonz√°lez', '1 Dic 2024')" class="text-green-600 hover:text-green-800 mr-2">Duplicar</button>
                                            <button onclick="downloadPrescriptionPDF('Mar√≠a Gonz√°lez', '1 Dic 2024')" class="text-purple-600 hover:text-purple-800">PDF</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-3">28 Nov 2024</td>
                                        <td class="px-4 py-3">Carlos Ruiz</td>
                                        <td class="px-4 py-3">Inmunoterapia</td>
                                        <td class="px-4 py-3">Pembrolizumab</td>
                                        <td class="px-4 py-3"><span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-sm">En revisi√≥n</span></td>
                                        <td class="px-4 py-3">
                                            <button onclick="viewPrescriptionDetails('Carlos Ruiz', '28 Nov 2024')" class="text-blue-600 hover:text-blue-800 mr-2">Ver</button>
                                            <button onclick="duplicatePrescription('Carlos Ruiz', '28 Nov 2024')" class="text-green-600 hover:text-green-800 mr-2">Duplicar</button>
                                            <button onclick="downloadPrescriptionPDF('Carlos Ruiz', '28 Nov 2024')" class="text-purple-600 hover:text-purple-800">PDF</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-3">25 Nov 2024</td>
                                        <td class="px-4 py-3">Ana L√≥pez</td>
                                        <td class="px-4 py-3">Hormonoterapia</td>
                                        <td class="px-4 py-3">Tamoxifeno</td>
                                        <td class="px-4 py-3"><span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-sm">Completada</span></td>
                                        <td class="px-4 py-3">
                                            <button onclick="viewPrescriptionDetails('Ana L√≥pez', '25 Nov 2024')" class="text-blue-600 hover:text-blue-800 mr-2">Ver</button>
                                            <button onclick="duplicatePrescription('Ana L√≥pez', '25 Nov 2024')" class="text-green-600 hover:text-green-800 mr-2">Duplicar</button>
                                            <button onclick="downloadPrescriptionPDF('Ana L√≥pez', '25 Nov 2024')" class="text-purple-600 hover:text-purple-800">PDF</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <div id="doctor-chat" class="doctor-section hidden">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-2xl font-bold mb-6">Chat M√©dico</h3>
                    
                    <div id="videoCallInterface" class="hidden fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center">
                        <div class="bg-white rounded-lg shadow-2xl w-full max-w-6xl h-5/6 flex flex-col">
                            <div class="bg-blue-600 text-white p-4 rounded-t-lg flex justify-between items-center">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center mr-3">
                                        <span id="videoCallPatientAvatar" class="text-lg">üë§</span>
                                    </div>
                                    <div>
                                        <h4 id="videoCallPatientName" class="font-bold">Videollamada</h4>
                                        <p class="text-sm text-blue-100">
                                            <span id="callDuration">00:00</span> ‚Ä¢ 
                                            <span id="callStatus" class="text-green-300">üü¢ Conectado</span>
                                        </p>
                                    </div>
                                </div>
                                <button onclick="endVideoCall()" class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg">
                                    ‚úï Finalizar
                                </button>
                            </div>

                            <div class="flex-1 bg-gray-900 relative overflow-hidden">
                                <div class="w-full h-full bg-gradient-to-br from-blue-900 to-purple-900 flex items-center justify-center relative">
                                    <div class="text-center text-white">
                                        <div class="w-32 h-32 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-4">
                                            <span id="mainVideoAvatar" class="text-6xl">üë§</span>
                                        </div>
                                        <h3 id="mainVideoName" class="text-2xl font-bold mb-2">Paciente</h3>
                                        <p class="text-blue-200">Video conectado</p>
                                    </div>
                                    
                                    <div class="absolute inset-0 bg-gradient-to-t from-black from-0% via-transparent via-50% to-transparent opacity-30"></div>
                                    <div class="absolute top-4 left-4 bg-red-600 text-white px-2 py-1 rounded text-sm">
                                        üî¥ REC
                                    </div>
                                </div>

                                <div class="absolute bottom-4 right-4 w-48 h-36 bg-gradient-to-br from-green-600 to-blue-600 rounded-lg border-2 border-white shadow-lg flex items-center justify-center">
                                    <div class="text-center text-white">
                                        <div class="w-16 h-16 bg-white bg-opacity-30 rounded-full flex items-center justify-center mx-auto mb-2">
                                            <span class="text-2xl">üë®‚Äç‚öïÔ∏è</span>
                                        </div>
                                        <p class="text-sm font-semibold">Dr. Mart√≠nez</p>
                                        <p class="text-xs text-green-200">Usted</p>
                                    </div>
                                </div>

                                <div class="absolute top-4 right-4 bg-black bg-opacity-50 text-white px-3 py-2 rounded-lg">
                                    <div class="flex items-center space-x-2">
                                        <div class="flex space-x-1">
                                            <div class="w-2 h-4 bg-green-500 rounded"></div>
                                            <div class="w-2 h-4 bg-green-500 rounded"></div>
                                            <div class="w-2 h-4 bg-green-500 rounded"></div>
                                            <div class="w-2 h-4 bg-gray-400 rounded"></div>
                                        </div>
                                        <span class="text-sm">Buena</span>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-gray-800 p-4 rounded-b-lg">
                                <div class="flex justify-center items-center space-x-4">
                                    <button id="micButton" onclick="toggleMicrophone()" class="w-12 h-12 bg-gray-600 hover:bg-gray-500 rounded-full flex items-center justify-center text-white transition-colors">
                                        <span id="micIcon">üé§</span>
                                    </button>
                                    
                                    <button id="cameraButton" onclick="toggleCamera()" class="w-12 h-12 bg-gray-600 hover:bg-gray-500 rounded-full flex items-center justify-center text-white transition-colors">
                                        <span id="cameraIcon">üìπ</span>
                                    </button>
                                    
                                    <button id="screenShareButton" onclick="toggleScreenShare()" class="w-12 h-12 bg-gray-600 hover:bg-gray-500 rounded-full flex items-center justify-center text-white transition-colors">
                                        <span id="screenShareIcon">üñ•Ô∏è</span>
                                    </button>
                                    
                                    <button onclick="toggleVideoCallChat()" class="w-12 h-12 bg-blue-600 hover:bg-blue-500 rounded-full flex items-center justify-center text-white transition-colors">
                                        üí¨
                                    </button>
                                    
                                    <button id="recordButton" onclick="toggleRecording()" class="w-12 h-12 bg-gray-600 hover:bg-gray-500 rounded-full flex items-center justify-center text-white transition-colors">
                                        <span id="recordIcon">‚è∫Ô∏è</span>
                                    </button>
                                    
                                    <button onclick="openVideoSettings()" class="w-12 h-12 bg-gray-600 hover:bg-gray-500 rounded-full flex items-center justify-center text-white transition-colors">
                                        ‚öôÔ∏è
                                    </button>
                                    
                                    <button onclick="endVideoCall()" class="w-12 h-12 bg-red-600 hover:bg-red-700 rounded-full flex items-center justify-center text-white transition-colors">
                                        üìû
                                    </button>
                                </div>
                                
                                <div class="mt-4 text-center text-gray-300 text-sm">
                                    <p>Videollamada m√©dica segura ‚Ä¢ Grabaci√≥n activada ‚Ä¢ Calidad HD</p>
                                </div>
                            </div>

                            <div id="videoCallChatPanel" class="hidden absolute right-0 top-0 w-80 h-full bg-white border-l shadow-lg flex flex-col">
                                <div class="bg-blue-600 text-white p-3">
                                    <div class="flex justify-between items-center">
                                        <h5 class="font-bold">Chat de Videollamada</h5>
                                        <button onclick="toggleVideoCallChat()" class="text-white hover:text-gray-200">‚úï</button>
                                    </div>
                                </div>
                                
                                <div id="videoCallMessages" class="flex-1 p-3 overflow-y-auto bg-gray-50">
                                    <div class="text-center text-gray-500 text-sm mb-4">
                                        Chat iniciado durante la videollamada
                                    </div>
                                </div>
                                
                                <div class="p-3 border-t">
                                    <div class="flex space-x-2">
                                        <input type="text" id="videoCallChatInput" placeholder="Mensaje durante la llamada..." class="flex-1 px-3 py-2 border rounded-lg text-sm focus:outline-none focus:border-blue-500" onkeypress="handleVideoCallChatKeyPress(event)">
                                        <button onclick="sendVideoCallMessage()" class="bg-blue-600 text-white px-3 py-2 rounded-lg text-sm hover:bg-blue-700">
                                            Enviar
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid md:grid-cols-3 gap-6">
                        <div class="bg-gray-50 rounded-lg p-4">
                            <h4 class="font-bold text-lg mb-4">Pacientes Disponibles</h4>
                            <div class="space-y-2">
                                <div onclick="selectPatientForChat('Mar√≠a Gonz√°lez')" class="patient-chat-item cursor-pointer p-3 bg-white rounded-lg border hover:border-blue-500 hover:bg-blue-50 transition-all">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center">
                                            <div class="w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center mr-3">
                                                <span class="text-lg">üë©</span>
                                            </div>
                                            <div>
                                                <p class="font-semibold">Mar√≠a Gonz√°lez</p>
                                                <p class="text-xs text-gray-500">C√°ncer de mama</p>
                                            </div>
                                        </div>
                                        <div class="flex flex-col items-end">
                                            <span class="w-3 h-3 bg-green-500 rounded-full"></span>
                                            <span class="text-xs text-gray-400 mt-1">En l√≠nea</span>
                                        </div>
                                    </div>
                                    <div class="mt-2 text-xs text-gray-600">
                                        √öltimo mensaje: "¬øC√≥mo debo tomar el medicamento?"
                                    </div>
                                </div>

                                <div onclick="selectPatientForChat('Carlos Ruiz')" class="patient-chat-item cursor-pointer p-3 bg-white rounded-lg border hover:border-blue-500 hover:bg-blue-50 transition-all">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center">
                                            <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-3">
                                                <span class="text-lg">üë®</span>
                                            </div>
                                            <div>
                                                <p class="font-semibold">Carlos Ruiz</p>
                                                <p class="text-xs text-gray-500">C√°ncer de pulm√≥n</p>
                                            </div>
                                        </div>
                                        <div class="flex flex-col items-end">
                                            <span class="w-3 h-3 bg-yellow-500 rounded-full"></span>
                                            <span class="text-xs text-gray-400 mt-1">Ausente</span>
                                        </div>
                                    </div>
                                    <div class="mt-2 text-xs text-gray-600">
                                        √öltimo mensaje: "Gracias por la consulta"
                                    </div>
                                </div>

                                <div onclick="selectPatientForChat('Ana L√≥pez')" class="patient-chat-item cursor-pointer p-3 bg-white rounded-lg border hover:border-blue-500 hover:bg-blue-50 transition-all">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center">
                                            <div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center mr-3">
                                                <span class="text-lg">üë©</span>
                                            </div>
                                            <div>
                                                <p class="font-semibold">Ana L√≥pez</p>
                                                <p class="text-xs text-gray-500">Hormonoterapia</p>
                                            </div>
                                        </div>
                                        <div class="flex flex-col items-end">
                                            <span class="w-3 h-3 bg-green-500 rounded-full"></span>
                                            <span class="text-xs text-gray-400 mt-1">En l√≠nea</span>
                                        </div>
                                    </div>
                                    <div class="mt-2 text-xs text-gray-600">
                                        √öltimo mensaje: "Buenos d√≠as doctor"
                                    </div>
                                </div>

                                <div onclick="selectPatientForChat('Pedro Mart√≠n')" class="patient-chat-item cursor-pointer p-3 bg-white rounded-lg border hover:border-blue-500 hover:bg-blue-50 transition-all">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center">
                                            <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center mr-3">
                                                <span class="text-lg">üë®</span>
                                            </div>
                                            <div>
                                                <p class="font-semibold">Pedro Mart√≠n</p>
                                                <p class="text-xs text-gray-500">Seguimiento</p>
                                            </div>
                                        </div>
                                        <div class="flex flex-col items-end">
                                            <span class="w-3 h-3 bg-red-500 rounded-full"></span>
                                            <span class="text-xs text-gray-400 mt-1">Desconectado</span>
                                        </div>
                                    </div>
                                    <div class="mt-2 text-xs text-gray-600">
                                        √öltimo mensaje: "Tengo algunas dudas"
                                    </div>
                                </div>
                            </div>

                            <div class="mt-6">
                                <h5 class="font-semibold mb-3">Acciones R√°pidas</h5>
                                <div class="space-y-2">
                                    <button onclick="sendBroadcastMessage()" class="w-full bg-blue-600 text-white px-3 py-2 rounded text-sm hover:bg-blue-700">
                                        üì¢ Mensaje Grupal
                                    </button>
                                    <button onclick="scheduleReminder()" class="w-full bg-green-600 text-white px-3 py-2 rounded text-sm hover:bg-green-700">
                                        ‚è∞ Programar Recordatorio
                                    </button>
                                    <button onclick="viewChatHistory()" class="w-full bg-purple-600 text-white px-3 py-2 rounded text-sm hover:bg-purple-700">
                                        üìã Historial Completo
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="md:col-span-2">
                            <div id="chatWindow" class="hidden">
                                <div class="bg-blue-600 text-white p-4 rounded-t-lg">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center">
                                            <div id="chatPatientAvatar" class="w-10 h-10 bg-white rounded-full flex items-center justify-center mr-3">
                                                <span class="text-lg">üë§</span>
                                            </div>
                                            <div>
                                                <h4 id="chatPatientName" class="font-bold">Seleccionar Paciente</h4>
                                                <p id="chatPatientStatus" class="text-sm text-blue-100">Estado</p>
                                            </div>
                                        </div>
                                        <div class="flex space-x-2">
                                            <button onclick="startVideoCall()" class="bg-blue-500 hover:bg-blue-400 px-3 py-1 rounded text-sm">
                                                üé• Video
                                            </button>
                                            <button onclick="startVoiceCall()" class="bg-blue-500 hover:bg-blue-400 px-3 py-1 rounded text-sm">
                                                üìû Llamar
                                            </button>
                                            <button onclick="closeChatWindow()" class="bg-red-500 hover:bg-red-400 px-3 py-1 rounded text-sm">
                                                ‚úï
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <div id="chatMessages" class="bg-gray-50 p-4 h-96 overflow-y-auto border-l border-r">
                                    </div>

                                <div class="bg-white p-4 rounded-b-lg border">
                                    <div class="flex items-center space-x-2">
                                        <button onclick="attachFile()" class="text-gray-500 hover:text-gray-700">
                                            üìé
                                        </button>
                                        <button onclick="insertEmoji()" class="text-gray-500 hover:text-gray-700">
                                            üòä
                                        </button>
                                        <input type="text" id="chatInput" placeholder="Escribir mensaje..." class="flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500" onkeypress="handleChatKeyPress(event)">
                                        <button onclick="sendMessage()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                                            Enviar
                                        </button>
                                    </div>
                                    
                                    <div class="mt-3">
                                        <p class="text-xs text-gray-500 mb-2">Respuestas r√°pidas:</p>
                                        <div class="flex flex-wrap gap-2">
                                            <button onclick="insertQuickResponse('¬øC√≥mo se siente hoy?')" class="bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded text-xs">
                                                ¬øC√≥mo se siente hoy?
                                            </button>
                                            <button onclick="insertQuickResponse('Recuerde tomar sus medicamentos')" class="bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded text-xs">
                                                Recordatorio medicamentos
                                            </button>
                                            <button onclick="insertQuickResponse('Programemos una cita de seguimiento')" class="bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded text-xs">
                                                Programar cita
                                            </button>
                                            <button onclick="insertQuickResponse('Si tiene alguna emergencia, llame inmediatamente')" class="bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded text-xs">
                                                Instrucciones emergencia
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div id="defaultChatState" class="bg-gray-100 rounded-lg p-8 text-center h-96 flex items-center justify-center">
                                <div>
                                    <div class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                        <span class="text-4xl">üí¨</span>
                                    </div>
                                    <h4 class="text-xl font-bold text-gray-700 mb-2">Chat M√©dico</h4>
                                    <p class="text-gray-500 mb-4">Seleccione un paciente de la lista para iniciar una conversaci√≥n</p>
                                    <div class="text-sm text-gray-400">
                                        <p>‚Ä¢ Comunicaci√≥n directa con pacientes</p>
                                        <p>‚Ä¢ Respuestas r√°pidas predefinidas</p>
                                        <p>‚Ä¢ Historial de conversaciones</p>
                                        <p>‚Ä¢ Llamadas de voz y video</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentUserType = '';
        let currentUser = '';

        // Login functions
        function showLogin(userType) {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('loginForm').classList.remove('hidden');
            currentUserType = userType;
            
            document.getElementById('loginTitle').textContent = 'Acceso Doctor/Administrador';
        }

        function backToSelection() {
            document.getElementById('loginForm').classList.add('hidden');
            document.getElementById('loginScreen').classList.remove('hidden');
        }

        function handleLogin(event) {
            event.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            // Demo login - in real app, this would validate against a server
            if (username && password) {
                currentUser = username;
                document.getElementById('userName').textContent = `Bienvenido, ${username}`;
                document.getElementById('userInfo').classList.remove('hidden');
                
                // Hide login screens
                document.getElementById('loginForm').classList.add('hidden');
                document.getElementById('loginScreen').classList.add('hidden');
                
                // Show appropriate dashboard
                if (currentUserType === 'doctor') {
                    document.getElementById('doctorDashboard').classList.remove('hidden');
                    initializeCharts();
                }
            }
        }

        function logout() {
            // Hide all dashboards
            document.getElementById('doctorDashboard').classList.add('hidden');
            document.getElementById('userInfo').classList.add('hidden');
            
            // Show login screen
            document.getElementById('loginScreen').classList.remove('hidden');
            
            // Reset form
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            currentUser = '';
            currentUserType = '';
        }

        // Doctor dashboard functions
        function showDoctorSection(section) {
            // Hide all sections
            document.querySelectorAll('.doctor-section').forEach(el => el.classList.add('hidden'));
            // Show selected section
            document.getElementById(`doctor-${section}`).classList.remove('hidden');
            
            // Update navigation
            document.querySelectorAll('.doctor-nav-btn').forEach(btn => {
                btn.classList.remove('bg-blue-600', 'text-white');
                btn.classList.add('bg-gray-200', 'text-gray-700');
            });
            event.target.classList.remove('bg-gray-200', 'text-gray-700');
            event.target.classList.add('bg-blue-600', 'text-white');
        }

        // Chart initialization
        function initializeCharts() {
            // Initialize Overview Charts
            initializeOverviewCharts();
            
            // Initialize Statistics Charts
            initializeStatisticsCharts();
        }

        function initializeStatisticsCharts() {
            // Patient Status Chart (Statistics section)
            const ctx1 = document.getElementById('patientStatusChart').getContext('2d');
            new Chart(ctx1, {
                type: 'doughnut',
                data: {
                    labels: ['Estable', 'En Tratamiento', 'Seguimiento', 'Cr√≠tico'],
                    datasets: [{
                        data: [12, 8, 3, 1],
                        backgroundColor: ['#10B981', '#F59E0B', '#3B82F6', '#EF4444'],
                        borderWidth: 3,
                        borderColor: '#ffffff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    cutout: '65%'
                }
            });

            // Treatment Effectiveness Chart
            const ctx2 = document.getElementById('treatmentEffectivenessChart').getContext('2d');
            new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: ['Quimioterapia', 'Inmunoterapia', 'Radioterapia', 'Hormonoterapia'],
                    datasets: [{
                        label: 'Efectividad (%)',
                        data: [85, 92, 78, 88],
                        backgroundColor: ['#3B82F6', '#10B981', '#8B5CF6', '#EC4899'],
                        borderRadius: 8,
                        borderSkipped: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });

            // Monthly Trends Stats Chart
            const ctx3 = document.getElementById('monthlyTrendsStatsChart').getContext('2d');
            new Chart(ctx3, {
                type: 'line',
                data: {
                    labels: ['Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
                    datasets: [
                        {
                            label: 'Nuevos Pacientes',
                            data: [5, 8, 6, 9, 7, 7],
                            borderColor: '#3B82F6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            tension: 0.4,
                            fill: true
                        },
                        {
                            label: 'Remisiones',
                            data: [2, 3, 4, 3, 5, 4],
                            borderColor: '#10B981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            tension: 0.4,
                            fill: true
                        },
                        {
                            label: 'Consultas (√∑10)',
                            data: [12, 15, 14, 16, 15, 15.6],
                            borderColor: '#8B5CF6',
                            backgroundColor: 'rgba(139, 92, 246, 0.1)',
                            tension: 0.4,
                            fill: false
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });

            // Cancer Types and Stages Chart
            const ctx4 = document.getElementById('cancerTypesStagesChart').getContext('2d');
            new Chart(ctx4, {
                type: 'doughnut',
                data: {
                    labels: ['Mama', 'Pulm√≥n', 'Pr√≥stata', 'Colon', 'Linfoma', 'Otros'],
                    datasets: [
                        {
                            label: 'Tipos de C√°ncer',
                            data: [8, 6, 5, 2, 2, 1],
                            backgroundColor: ['#EC4899', '#6B7280', '#8B5CF6', '#F59E0B', '#10B981', '#EF4444'],
                            borderWidth: 2,
                            borderColor: '#ffffff'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                usePointStyle: true,
                                padding: 15,
                                font: {
                                    size: 11
                                }
                            }
                        }
                    },
                    cutout: '50%'
                }
            });

            // Demographics Chart
            const ctx5 = document.getElementById('demographicsChart').getContext('2d');
            new Chart(ctx5, {
                type: 'bar',
                data: {
                    labels: ['20-39 a√±os', '40-59 a√±os', '60+ a√±os'],
                    datasets: [
                        {
                            label: 'Mujeres',
                            data: [4, 7, 3],
                            backgroundColor: '#EC4899',
                            borderRadius: 4
                        },
                        {
                            label: 'Hombres',
                            data: [2, 5, 3],
                            backgroundColor: '#3B82F6',
                            borderRadius: 4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            stacked: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        },
                        x: {
                            stacked: true,
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });

            // Side Effects Chart
            const ctx6 = document.getElementById('sideEffectsChart').getContext('2d');
            new Chart(ctx6, {
                type: 'horizontalBar',
                data: {
                    labels: ['N√°useas/V√≥mitos', 'Fatiga', 'Alopecia', 'Neutropenia', 'Mucositis'],
                    datasets: [{
                        label: 'Incidencia (%)',
                        data: [45, 38, 32, 28, 15],
                        backgroundColor: ['#EF4444', '#F59E0B', '#FCD34D', '#3B82F6', '#8B5CF6'],
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            max: 50,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        },
                        y: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });

            // Comparative Analysis Chart
            const ctx7 = document.getElementById('comparativeAnalysisChart').getContext('2d');
            new Chart(ctx7, {
                type: 'line',
                data: {
                    labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
                    datasets: [
                        {
                            label: 'Supervivencia 2024',
                            data: [82, 83, 85, 86, 87, 87.5, 88, 88.2, 87.8, 88.5, 87.5, 87.5],
                            borderColor: '#10B981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            tension: 0.4,
                            fill: true
                        },
                        {
                            label: 'Supervivencia 2023',
                            data: [78, 79, 80, 81, 82, 83, 84, 84.5, 85, 85.2, 85.5, 85.2],
                            borderColor: '#6B7280',
                            backgroundColor: 'rgba(107, 114, 128, 0.1)',
                            tension: 0.4,
                            fill: false
                        },
                        {
                            label: 'Calidad de Vida 2024',
                            data: [7.8, 8.0, 8.1, 8.2, 8.3, 8.4, 8.5, 8.4, 8.3, 8.4, 8.4, 8.4],
                            borderColor: '#3B82F6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            tension: 0.4,
                            yAxisID: 'y1'
                        },
                        {
                            label: 'Efectos Adversos 2024',
                            data: [35, 34, 33, 32, 31, 30, 29, 28, 27, 26, 25, 24],
                            borderColor: '#EF4444',
                            backgroundColor: 'rgba(239, 68, 68, 0.1)',
                            tension: 0.4,
                            yAxisID: 'y1'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            min: 70,
                            max: 95,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            min: 0,
                            max: 40,
                            grid: {
                                drawOnChartArea: false,
                            },
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }

        function updatePatientStatusChart(period) {
            // This function would update the chart based on the selected time period
            // For demo purposes, we'll just show an alert
            alert(`Actualizando gr√°fica para el per√≠odo: ${period}`);
        }

        function initializeOverviewCharts() {
            // Patient Status Overview Chart
            const ctxStatus = document.getElementById('patientStatusOverviewChart').getContext('2d');
            new Chart(ctxStatus, {
                type: 'doughnut',
                data: {
                    labels: ['Estable', 'En Tratamiento', 'Seguimiento', 'Cr√≠tico'],
                    datasets: [{
                        data: [12, 8, 3, 1],
                        backgroundColor: ['#10B981', '#F59E0B', '#3B82F6', '#EF4444'],
                        borderWidth: 2,
                        borderColor: '#ffffff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    cutout: '60%'
                }
            });

            // Cancer Types Chart
            const ctxCancer = document.getElementById('cancerTypesChart').getContext('2d');
            new Chart(ctxCancer, {
                type: 'pie',
                data: {
                    labels: ['Mama', 'Pulm√≥n', 'Pr√≥stata', 'Otros'],
                    datasets: [{
                        data: [8, 6, 5, 5],
                        backgroundColor: ['#EC4899', '#6B7280', '#8B5CF6', '#F59E0B'],
                        borderWidth: 2,
                        borderColor: '#ffffff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });

            // Monthly Trends Chart
            const ctxTrends = document.getElementById('monthlyTrendsChart').getContext('2d');
            new Chart(ctxTrends, {
                type: 'line',
                data: {
                    labels: ['Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
                    datasets: [
                        {
                            label: 'Nuevos Pacientes',
                            data: [5, 8, 6, 9, 7, 7],
                            borderColor: '#3B82F6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            tension: 0.4,
                            fill: true
                        },
                        {
                            label: 'Altas M√©dicas',
                            data: [2, 3, 4, 3, 5, 4],
                            borderColor: '#10B981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            tension: 0.4,
                            fill: true
                        },
                        {
                            label: 'Consultas (x10)',
                            data: [12, 15, 14, 16, 15, 15.6],
                            borderColor: '#8B5CF6',
                            backgroundColor: 'rgba(139, 92, 246, 0.1)',
                            tension: 0.4,
                            fill: false
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });

            // Age Demographics Chart
            const ctxAge = document.getElementById('ageDemographicsChart').getContext('2d');
            new Chart(ctxAge, {
                type: 'bar',
                data: {
                    labels: ['20-39', '40-59', '60+'],
                    datasets: [{
                        label: 'Pacientes por Edad',
                        data: [6, 12, 6],
                        backgroundColor: ['#3B82F6', '#10B981', '#8B5CF6'],
                        borderRadius: 8,
                        borderSkipped: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 15,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }

        // Patient Management Functions
        function showAddPatientForm() {
            document.getElementById('addPatientForm').classList.remove('hidden');
        }

        function cancelAddPatient() {
            document.getElementById('addPatientForm').classList.add('hidden');
            // Clear form
            document.getElementById('patientName').value = '';
            document.getElementById('patientAge').value = '';
            document.getElementById('patientDiagnosis').value = '';
            document.getElementById('patientPhone').value = '';
            document.getElementById('patientAddress').value = '';
        }

        function addPatient() {
            const name = document.getElementById('patientName').value;
            const age = document.getElementById('patientAge').value;
            const diagnosis = document.getElementById('patientDiagnosis').value;
            const phone = document.getElementById('patientPhone').value;
            const address = document.getElementById('patientAddress').value;

            if (name && age && diagnosis && phone) {
                // Add new row to table
                const tableBody = document.getElementById('patientsTableBody');
                const newRow = document.createElement('tr');
                newRow.innerHTML = `
                    <td class="px-4 py-3">${name}</td>
                    <td class="px-4 py-3">${age}</td>
                    <td class="px-4 py-3">${diagnosis}</td>
                    <td class="px-4 py-3"><span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm">Nuevo</span></td>
                    <td class="px-4 py-3">${phone}</td>
                    <td class="px-4 py-3">
                        <button onclick="viewPatient('${name}')" class="text-blue-600 hover:text-blue-800 mr-2">Ver</button>
                        <button onclick="scheduleAppointment('${name}')" class="text-green-600 hover:text-green-800 mr-2">Cita</button>
                        <button onclick="editPatient('${name}')" class="text-purple-600 hover:text-purple-800">Editar</button>
                    </td>
                `;
                tableBody.appendChild(newRow);
                
                alert(`Paciente ${name} agregado exitosamente!`);
                cancelAddPatient();
            } else {
                alert('Por favor complete todos los campos obligatorios.');
            }
        }

        function viewPatient(name) {
            alert(`Viendo perfil completo de ${name}...`);
        }

        function editPatient(name) {
            alert(`Editando informaci√≥n de ${name}...`);
        }

        function scheduleAppointment(name) {
            alert(`Programando cita para ${name}...`);
            showDoctorSection('appointments');
        }

        // Appointment Management Functions
        function showNewAppointmentForm() {
            document.getElementById('newAppointmentForm').classList.remove('hidden');
        }

        function cancelNewAppointment() {
            document.getElementById('newAppointmentForm').classList.add('hidden');
        }

        function saveAppointment() {
            const patient = document.getElementById('appointmentPatient').value;
            const date = document.getElementById('appointmentDate').value;
            const time = document.getElementById('appointmentTime').value;
            const type = document.getElementById('appointmentType').value;

            if (patient && date && time && type) {
                alert(`Cita programada para ${patient} el ${date} a las ${time}`);
                cancelNewAppointment();
            } else {
                alert('Por favor complete todos los campos.');
            }
        }

        function changeCalendarView(view) {
            document.querySelectorAll('.calendar-view-btn').forEach(btn => {
                btn.classList.remove('bg-blue-600', 'text-white');
                btn.classList.add('bg-gray-200', 'text-gray-700');
            });
            event.target.classList.remove('bg-gray-200', 'text-gray-700');
            event.target.classList.add('bg-blue-600', 'text-white');
            
            alert(`Cambiando vista del calendario a: ${view}`);
        }

        function startConsultation(patient) {
            alert(`Iniciando consulta con ${patient}...`);
        }

        function rescheduleAppointment(patient) {
            alert(`Reprogramando cita de ${patient}...`);
        }

        function cancelAppointment(patient) {
            if (confirm(`¬øEst√° seguro de cancelar la cita de ${patient}?`)) {
                alert(`Cita de ${patient} cancelada.`);
            }
        }

        // Consultation Functions
        function showConsultationOptions() {
            document.getElementById('consultationOptions').classList.remove('hidden');
        }

        function cancelConsultationSelection() {
            document.getElementById('consultationOptions').classList.add('hidden');
        }

        function selectConsultationType(type) {
            document.getElementById('consultationOptions').classList.add('hidden');
            
            if (type === 'virtual') {
                document.getElementById('virtualConsultationSetup').classList.remove('hidden');
            } else if (type === 'presencial') {
                document.getElementById('presencialConsultationSetup').classList.remove('hidden');
            }
        }

        function cancelVirtualSetup() {
            document.getElementById('virtualConsultationSetup').classList.add('hidden');
        }

        function cancelPresencialSetup() {
            document.getElementById('presencialConsultationSetup').classList.add('hidden');
        }

        function startVirtualConsultation() {
            const patient = document.getElementById('virtualPatient').value;
            const duration = document.getElementById('consultationDuration').value;
            
            if (patient) {
                alert(`üé• Iniciando videollamada con ${patient} por ${duration} minutos...`);
                cancelVirtualSetup();
            } else {
                alert('Por favor seleccione un paciente.');
            }
        }

        function scheduleVirtualConsultation() {
            const patient = document.getElementById('virtualPatient').value;
            
            if (patient) {
                alert(`üìÖ Programando consulta virtual con ${patient}...`);
                cancelVirtualSetup();
            } else {
                alert('Por favor seleccione un paciente.');
            }
        }

        function startPresencialConsultation() {
            const patient = document.getElementById('presencialPatient').value;
            const room = document.getElementById('consultationRoom').value;
            
            if (patient) {
                alert(`üè• Iniciando consulta presencial con ${patient} en ${room}...`);
                cancelPresencialSetup();
            } else {
                alert('Por favor seleccione un paciente.');
            }
        }

        function schedulePresencialConsultation() {
            const patient = document.getElementById('presencialPatient').value;
            
            if (patient) {
                alert(`üìÖ Programando consulta presencial con ${patient}...`);
                cancelPresencialSetup();
            } else {
                alert('Por favor seleccione un paciente.');
            }
        }

        function joinVirtualConsultation(patient) {
            alert(`Uni√©ndose a la videollamada con ${patient}...`);
        }

        function endConsultation(patient) {
            if (confirm(`¬øFinalizar consulta con ${patient}?`)) {
                alert(`Consulta con ${patient} finalizada.`);
            }
        }

        function startPresencialNow(patient) {
            alert(`Iniciando consulta presencial con ${patient}...`);
        }

        function postponeConsultation(patient) {
            alert(`Posponiendo consulta de ${patient}...`);
        }

        function viewConsultationNotes(patient) {
            alert(`Viendo notas de consulta de ${patient}...`);
        }

        function downloadRecording(patient) {
            alert(`Descargando grabaci√≥n de consulta con ${patient}...`);
        }

        function viewExamResults(patient) {
            alert(`Viendo resultados de ex√°menes de ${patient}...`);
        }

        // Prescription Management Functions
        function showNewPrescriptionForm() {
            document.getElementById('newPrescriptionForm').classList.remove('hidden');
        }

        function cancelNewPrescription() {
            document.getElementById('newPrescriptionForm').classList.add('hidden');
            // Clear form
            document.getElementById('prescriptionPatient').value = '';
            document.getElementById('treatmentType').value = '';
            document.getElementById('treatmentDuration').value = '';
            document.getElementById('treatmentStartDate').value = '';
            document.getElementById('specialInstructions').value = '';
            
            // Reset medication list to one row
            const medicationList = document.getElementById('medicationList');
            medicationList.innerHTML = `
                <div class="medication-item grid grid-cols-5 gap-2 p-3 bg-white rounded border">
                    <select class="medication-select px-2 py-1 border rounded text-sm">
                        <option value="">Seleccionar medicamento</option>
                        <option value="Ciclofosfamida">Ciclofosfamida</option>
                        <option value="Doxorrubicina">Doxorrubicina</option>
                        <option value="Paclitaxel">Paclitaxel</option>
                        <option value="Carboplatin">Carboplatin</option>
                        <option value="Trastuzumab">Trastuzumab</option>
                        <option value="Tamoxifeno">Tamoxifeno</option>
                        <option value="Ondansetr√≥n">Ondansetr√≥n</option>
                        <option value="Dexametasona">Dexametasona</option>
                    </select>
                    <input type="text" placeholder="Dosis" class="px-2 py-1 border rounded text-sm">
                    <select class="px-2 py-1 border rounded text-sm">
                        <option value="mg">mg</option>
                        <option value="ml">ml</option>
                        <option value="UI">UI</option>
                        <option value="mcg">mcg</option>
                    </select>
                    <input type="text" placeholder="Frecuencia" class="px-2 py-1 border rounded text-sm">
                    <button type="button" onclick="removeMedication(this)" class="bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600">
                        ‚úï
                    </button>
                </div>
            `;
        }

        function addMedicationRow() {
            const medicationList = document.getElementById('medicationList');
            const newRow = document.createElement('div');
            newRow.className = 'medication-item grid grid-cols-5 gap-2 p-3 bg-white rounded border';
            newRow.innerHTML = `
                <select class="medication-select px-2 py-1 border rounded text-sm">
                    <option value="">Seleccionar medicamento</option>
                    <option value="Ciclofosfamida">Ciclofosfamida</option>
                    <option value="Doxorrubicina">Doxorrubicina</option>
                    <option value="Paclitaxel">Paclitaxel</option>
                    <option value="Carboplatin">Carboplatin</option>
                    <option value="Trastuzumab">Trastuzumab</option>
                    <option value="Tamoxifeno">Tamoxifeno</option>
                    <option value="Ondansetr√≥n">Ondansetr√≥n</option>
                    <option value="Dexametasona">Dexametasona</option>
                </select>
                <input type="text" placeholder="Dosis" class="px-2 py-1 border rounded text-sm">
                <select class="px-2 py-1 border rounded text-sm">
                    <option value="mg">mg</option>
                    <option value="ml">ml</option>
                    <option value="UI">UI</option>
                    <option value="mcg">mcg</option>
                </select>
                <input type="text" placeholder="Frecuencia" class="px-2 py-1 border rounded text-sm">
                <button type="button" onclick="removeMedication(this)" class="bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600">
                    ‚úï
                </button>
            `;
            medicationList.appendChild(newRow);
        }

        function removeMedication(button) {
            const medicationList = document.getElementById('medicationList');
            if (medicationList.children.length > 1) {
                button.closest('.medication-item').remove();
            } else {
                alert('Debe mantener al menos un medicamento en la receta.');
            }
        }

        function savePrescription() {
            const patient = document.getElementById('prescriptionPatient').value;
            const treatmentType = document.getElementById('treatmentType').value;
            const duration = document.getElementById('treatmentDuration').value;
            const startDate = document.getElementById('treatmentStartDate').value;

            if (patient && treatmentType && duration && startDate) {
                alert(`‚úÖ Receta oncol√≥gica guardada exitosamente para ${patient}\n\nTipo: ${treatmentType}\nDuraci√≥n: ${duration}\nInicio: ${startDate}\n\nLa receta ha sido registrada en el sistema y est√° disponible para el paciente.`);
                cancelNewPrescription();
            } else {
                alert('Por favor complete todos los campos obligatorios.');
            }
        }

        function generatePrescriptionPDF() {
            const patient = document.getElementById('prescriptionPatient').value;
            
            if (patient) {
                alert(`üìÑ Generando PDF de receta oncol√≥gica para ${patient}...\n\nEn una aplicaci√≥n real, esto generar√≠a un PDF profesional con:\n‚Ä¢ Informaci√≥n del m√©dico y hospital\n‚Ä¢ Datos del paciente\n‚Ä¢ Medicamentos y dosis detalladas\n‚Ä¢ Instrucciones especiales\n‚Ä¢ Firma digital del m√©dico`);
            } else {
                alert('Por favor seleccione un paciente antes de generar el PDF.');
            }
        }

        function viewFullPrescription(patient) {
            if (patient === 'Mar√≠a Gonz√°lez') {
                alert(`üìã RECETA ONCOL√ìGICA COMPLETA - ${patient}\n\nüè• Dr. Carlos Mart√≠nez - Oncolog√≠a M√©dica\nHospital General de Comit√°n\n\nüë§ PACIENTE: Mar√≠a Gonz√°lez, 45 a√±os\nüìã DIAGN√ìSTICO: C√°ncer de mama - Estadio II (T2N1M0)\n\nüíâ TRATAMIENTO PRINCIPAL:\nüß™ Quimioterapia Neoadyuvante AC-T\n‚Ä¢ Doxorrubicina 60mg/m¬≤ IV - D√≠a 1\n‚Ä¢ Ciclofosfamida 600mg/m¬≤ IV - D√≠a 1\n‚Ä¢ Repetir cada 21 d√≠as x 4 ciclos\n\nüíä MEDICAMENTOS DE SOPORTE:\n‚Ä¢ Ondansetr√≥n 8mg IV pre-quimio + 8mg VO c/8h PRN\n‚Ä¢ Dexametasona 12mg IV pre-quimio\n‚Ä¢ Filgrastim 300mcg SC d√≠as 3-10 de cada ciclo\n\n‚ö†Ô∏è PRECAUCIONES:\n‚Ä¢ Monitoreo card√≠aco (FEVI) antes de cada ciclo\n‚Ä¢ Hemograma completo semanal\n‚Ä¢ Evitar exposici√≥n a infecciones\n‚Ä¢ Reportar fiebre >38¬∞C inmediatamente\n\nüìÖ PR√ìXIMA CITA: 22 Dic 2024 - 10:00 AM`);
            } else if (patient === 'Carlos Ruiz') {
                alert(`üìã RECETA ONCOL√ìGICA COMPLETA - ${patient}\n\nüè• Dr. Carlos Mart√≠nez - Oncolog√≠a M√©dica\nHospital General de Comit√°n\n\nüë§ PACIENTE: Carlos Ruiz, 58 a√±os\nüìã DIAGN√ìSTICO: C√°ncer de pulm√≥n - Estadio IIIA (T3N2M0)\n\nüíâ TRATAMIENTO PRINCIPAL:\nüéØ Inmunoterapia\n‚Ä¢ Pembrolizumab 200mg IV cada 3 semanas\n‚Ä¢ Duraci√≥n: 6 ciclos (18 semanas)\n\nüíä MEDICAMENTOS DE SOPORTE:\n‚Ä¢ Prednisolona 20mg VO diario (reducir gradualmente)\n‚Ä¢ Omeprazol 40mg VO en ayunas\n‚Ä¢ Paracetamol 500mg VO c/6h PRN dolor/fiebre\n\n‚ö†Ô∏è PRECAUCIONES:\n‚Ä¢ Monitoreo de funci√≥n tiroidea mensual\n‚Ä¢ Vigilar s√≠ntomas de neumonitis\n‚Ä¢ Reportar disnea, tos seca persistente\n‚Ä¢ Evitar vacunas con virus vivos\n\nüìÖ PR√ìXIMA CITA: 19 Dic 2024 - 11:30 AM`);
            } else {
                alert(`üìã Viendo receta completa de ${patient}...`);
            }
        }

        function modifyPrescription(patient) {
            alert(`‚úèÔ∏è Modificando receta de ${patient}...\n\nEn una aplicaci√≥n real, esto abrir√≠a el formulario de edici√≥n con los datos actuales del paciente para realizar ajustes en:\n‚Ä¢ Dosis de medicamentos\n‚Ä¢ Frecuencia de administraci√≥n\n‚Ä¢ Medicamentos de soporte\n‚Ä¢ Instrucciones especiales`);
        }

        function printPrescription(patient) {
            alert(`üñ®Ô∏è Imprimiendo receta de ${patient}...\n\nEn una aplicaci√≥n real, esto enviar√≠a la receta a la impresora con formato oficial que incluye:\n‚Ä¢ Membrete del hospital\n‚Ä¢ Informaci√≥n del m√©dico\n‚Ä¢ Datos completos del paciente\n‚Ä¢ Medicamentos y dosis\n‚Ä¢ Firma y sello m√©dico`);
        }

        function viewPrescriptionDetails(patient, date) {
            alert(`üìã Viendo detalles de receta:\n\nPaciente: ${patient}\nFecha: ${date}\n\nEn una aplicaci√≥n real, esto mostrar√≠a todos los detalles de la receta hist√≥rica.`);
        }

        function duplicatePrescription(patient, date) {
            alert(`üìã Duplicando receta de ${patient} del ${date}...\n\nEsto crear√° una nueva receta basada en la anterior, permitiendo hacer modificaciones antes de guardar.`);
        }

        function downloadPrescriptionPDF(patient, date) {
            alert(`üìÑ Descargando PDF de receta:\n\nPaciente: ${patient}\nFecha: ${date}\n\nEn una aplicaci√≥n real, esto descargar√≠a el archivo PDF de la receta.`);
        }

        // Chat Functions
        let currentChatPatient = '';
        let chatMessages = [];

        function selectPatientForChat(patientName) {
            currentChatPatient = patientName;
            
            // Update chat header
            document.getElementById('chatPatientName').textContent = patientName;
            
            // Set patient avatar and status
            const avatarElement = document.getElementById('chatPatientAvatar');
            const statusElement = document.getElementById('chatPatientStatus');
            
            if (patientName === 'Mar√≠a Gonz√°lez') {
                avatarElement.innerHTML = '<span class="text-lg">üë©</span>';
                avatarElement.className = 'w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center mr-3';
                statusElement.textContent = 'En l√≠nea - C√°ncer de mama';
                loadChatHistory('Mar√≠a Gonz√°lez');
            } else if (patientName === 'Carlos Ruiz') {
                avatarElement.innerHTML = '<span class="text-lg">üë®</span>';
                avatarElement.className = 'w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-3';
                statusElement.textContent = 'Ausente - C√°ncer de pulm√≥n';
                loadChatHistory('Carlos Ruiz');
            } else if (patientName === 'Ana L√≥pez') {
                avatarElement.innerHTML = '<span class="text-lg">üë©</span>';
                avatarElement.className = 'w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center mr-3';
                statusElement.textContent = 'En l√≠nea - Hormonoterapia';
                loadChatHistory('Ana L√≥pez');
            } else if (patientName === 'Pedro Mart√≠n') {
                avatarElement.innerHTML = '<span class="text-lg">üë®</span>';
                avatarElement.className = 'w-10 h-10 bg-green-100 rounded-full flex items-center justify-center mr-3';
                statusElement.textContent = 'Desconectado - Seguimiento';
                loadChatHistory('Pedro Mart√≠n');
            }
            
            // Show chat window and hide default state
            document.getElementById('defaultChatState').classList.add('hidden');
            document.getElementById('chatWindow').classList.remove('hidden');
            
            // Highlight selected patient
            document.querySelectorAll('.patient-chat-item').forEach(item => {
                item.classList.remove('border-blue-500', 'bg-blue-50');
                item.classList.add('border-gray-200');
            });
            event.target.closest('.patient-chat-item').classList.add('border-blue-500', 'bg-blue-50');
        }

        function loadChatHistory(patientName) {
            const chatMessagesContainer = document.getElementById('chatMessages');
            
            // Sample chat histories for each patient
            const chatHistories = {
                'Mar√≠a Gonz√°lez': [
                    { sender: 'patient', message: 'Buenos d√≠as doctor, ¬øc√≥mo debo tomar el medicamento?', time: '09:15 AM', date: 'Hoy' },
                    { sender: 'doctor', message: 'Buenos d√≠as Mar√≠a. Debe tomar la Doxorrubicina con abundante agua, preferiblemente en ayunas. ¬øHa experimentado alg√∫n efecto secundario?', time: '09:18 AM', date: 'Hoy' },
                    { sender: 'patient', message: 'S√≠, he tenido un poco de n√°useas por las ma√±anas', time: '09:20 AM', date: 'Hoy' },
                    { sender: 'doctor', message: 'Es normal. Le voy a recetar Ondansetr√≥n para controlar las n√°useas. T√≥melo 30 minutos antes de la quimioterapia.', time: '09:22 AM', date: 'Hoy' },
                    { sender: 'patient', message: 'Perfecto, muchas gracias doctor. ¬øCu√°ndo es mi pr√≥xima cita?', time: '09:25 AM', date: 'Hoy' },
                    { sender: 'doctor', message: 'Su pr√≥xima cita es el 22 de diciembre a las 10:00 AM. Recuerde traer sus an√°lisis de sangre.', time: '09:27 AM', date: 'Hoy' }
                ],
                'Carlos Ruiz': [
                    { sender: 'patient', message: 'Doctor, me siento mejor despu√©s del tratamiento', time: '02:30 PM', date: 'Ayer' },
                    { sender: 'doctor', message: 'Me alegra escuchar eso Carlos. ¬øHa notado alg√∫n cambio en su respiraci√≥n?', time: '02:35 PM', date: 'Ayer' },
                    { sender: 'patient', message: 'S√≠, respiro mucho mejor. La tos ha disminuido considerablemente', time: '02:37 PM', date: 'Ayer' },
                    { sender: 'doctor', message: 'Excelente. El Pembrolizumab est√° funcionando bien. Continuemos con el tratamiento seg√∫n lo programado.', time: '02:40 PM', date: 'Ayer' },
                    { sender: 'patient', message: 'Gracias por la consulta doctor', time: '02:42 PM', date: 'Ayer' }
                ],
                'Ana L√≥pez': [
                    { sender: 'patient', message: 'Buenos d√≠as doctor', time: '08:00 AM', date: 'Hoy' },
                    { sender: 'doctor', message: 'Buenos d√≠as Ana, ¬øc√≥mo se siente con la hormonoterapia?', time: '08:05 AM', date: 'Hoy' },
                    { sender: 'patient', message: 'Bien en general, aunque tengo algunos sofocos', time: '08:07 AM', date: 'Hoy' },
                    { sender: 'doctor', message: 'Los sofocos son un efecto secundario com√∫n del Tamoxifeno. ¬øSon muy intensos?', time: '08:10 AM', date: 'Hoy' }
                ],
                'Pedro Mart√≠n': [
                    { sender: 'patient', message: 'Doctor, tengo algunas dudas sobre mi tratamiento', time: '06:45 PM', date: 'Ayer' },
                    { sender: 'doctor', message: 'Por supuesto Pedro, d√≠game sus dudas', time: '07:00 PM', date: 'Ayer' },
                    { sender: 'patient', message: '¬øPuedo hacer ejercicio durante el tratamiento?', time: '07:02 PM', date: 'Ayer' },
                    { sender: 'doctor', message: 'S√≠, el ejercicio ligero es recomendable. Evite actividades muy intensas y escuche a su cuerpo.', time: '07:05 PM', date: 'Ayer' }
                ]
            };
            
            const messages = chatHistories[patientName] || [];
            chatMessagesContainer.innerHTML = '';
            
            messages.forEach(msg => {
                const messageDiv = document.createElement('div');
                messageDiv.className = `mb-4 ${msg.sender === 'doctor' ? 'text-right' : 'text-left'}`;
                
                messageDiv.innerHTML = `
                    <div class="inline-block max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${
                        msg.sender === 'doctor' 
                            ? 'bg-blue-600 text-white' 
                            : 'bg-white border border-gray-200'
                    }">
                        <p class="text-sm">${msg.message}</p>
                        <p class="text-xs mt-1 ${msg.sender === 'doctor' ? 'text-blue-100' : 'text-gray-500'}">
                            ${msg.time} - ${msg.date}
                        </p>
                    </div>
                `;
                
                chatMessagesContainer.appendChild(messageDiv);
            });
            
            // Scroll to bottom
            chatMessagesContainer.scrollTop = chatMessagesContainer.scrollHeight;
        }

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (message && currentChatPatient) {
                // Add message to chat
                const chatMessagesContainer = document.getElementById('chatMessages');
                const messageDiv = document.createElement('div');
                messageDiv.className = 'mb-4 text-right';
                
                const now = new Date();
                const timeString = now.toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' });
                
                messageDiv.innerHTML = `
                    <div class="inline-block max-w-xs lg:max-w-md px-4 py-2 rounded-lg bg-blue-600 text-white">
                        <p class="text-sm">${message}</p>
                        <p class="text-xs mt-1 text-blue-100">${timeString} - Hoy</p>
                    </div>
                `;
                
                chatMessagesContainer.appendChild(messageDiv);
                chatMessagesContainer.scrollTop = chatMessagesContainer.scrollHeight;
                
                // Clear input
                input.value = '';
                
                // Simulate patient response after 2 seconds
                setTimeout(() => {
                    simulatePatientResponse(message);
                }, 2000);
                
                alert(`‚úÖ Mensaje enviado a ${currentChatPatient}: "${message}"`);
            } else if (!currentChatPatient) {
                alert('Por favor seleccione un paciente primero.');
            } else {
                alert('Por favor escriba un mensaje.');
            }
        }

        function simulatePatientResponse(doctorMessage) {
            const responses = [
                'Gracias doctor, entendido.',
                'Perfecto, seguir√© sus indicaciones.',
                'Me siento mejor, gracias por preguntar.',
                'S√≠ doctor, tomar√© el medicamento como indica.',
                'Muchas gracias por su atenci√≥n.',
                'Entiendo, estar√© atento a los s√≠ntomas.',
                'Gracias por la explicaci√≥n doctor.'
            ];
            
            const randomResponse = responses[Math.floor(Math.random() * responses.length)];
            const chatMessagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'mb-4 text-left';
            
            const now = new Date();
            const timeString = now.toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' });
            
            messageDiv.innerHTML = `
                <div class="inline-block max-w-xs lg:max-w-md px-4 py-2 rounded-lg bg-white border border-gray-200">
                    <p class="text-sm">${randomResponse}</p>
                    <p class="text-xs mt-1 text-gray-500">${timeString} - Hoy</p>
                </div>
            `;
            
            chatMessagesContainer.appendChild(messageDiv);
            chatMessagesContainer.scrollTop = chatMessagesContainer.scrollHeight;
        }

        function handleChatKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function insertQuickResponse(response) {
            document.getElementById('chatInput').value = response;
        }

        function closeChatWindow() {
            document.getElementById('chatWindow').classList.add('hidden');
            document.getElementById('defaultChatState').classList.remove('hidden');
            currentChatPatient = '';
            
            // Remove highlight from patient list
            document.querySelectorAll('.patient-chat-item').forEach(item => {
                item.classList.remove('border-blue-500', 'bg-blue-50');
                item.classList.add('border-gray-200');
            });
        }

        // Video Call Variables
        let callTimer = null;
        let callStartTime = null;
        let micMuted = false;
        let cameraOff = false;
        let screenSharing = false;
        let recording = false;
        let videoChatOpen = false;

        function startVideoCall() {
            if (currentChatPatient) {
                // Set up video call interface
                document.getElementById('videoCallPatientName').textContent = `Videollamada con ${currentChatPatient}`;
                
                // Set patient avatar based on current patient
                const videoCallAvatar = document.getElementById('videoCallPatientAvatar');
                const mainVideoAvatar = document.getElementById('mainVideoAvatar');
                const mainVideoName = document.getElementById('mainVideoName');
                
                if (currentChatPatient === 'Mar√≠a Gonz√°lez') {
                    videoCallAvatar.innerHTML = 'üë©';
                    mainVideoAvatar.innerHTML = 'üë©';
                    mainVideoName.textContent = 'Mar√≠a Gonz√°lez';
                } else if (currentChatPatient === 'Carlos Ruiz') {
                    videoCallAvatar.innerHTML = 'üë®';
                    mainVideoAvatar.innerHTML = 'üë®';
                    mainVideoName.textContent = 'Carlos Ruiz';
                } else if (currentChatPatient === 'Ana L√≥pez') {
                    videoCallAvatar.innerHTML = 'üë©';
                    mainVideoAvatar.innerHTML = 'üë©';
                    mainVideoName.textContent = 'Ana L√≥pez';
                } else if (currentChatPatient === 'Pedro Mart√≠n') {
                    videoCallAvatar.innerHTML = 'üë®';
                    mainVideoAvatar.innerHTML = 'üë®';
                    mainVideoName.textContent = 'Pedro Mart√≠n';
                }
                
                // Show video call interface
                document.getElementById('videoCallInterface').classList.remove('hidden');
                
                // Start call timer
                startCallTimer();
                
                // Simulate connection process
                simulateConnectionProcess();
                
                // Reset controls
                resetVideoCallControls();
                
            } else {
                alert('Seleccione un paciente primero.');
            }
        }

        function startCallTimer() {
            callStartTime = new Date();
            callTimer = setInterval(() => {
                const now = new Date();
                const elapsed = Math.floor((now - callStartTime) / 1000);
                const minutes = Math.floor(elapsed / 60);
                const seconds = elapsed % 60;
                document.getElementById('callDuration').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        function simulateConnectionProcess() {
            const callStatus = document.getElementById('callStatus');
            
            // Connecting phase
            callStatus.innerHTML = 'üü° Conectando...';
            callStatus.className = 'text-yellow-300';
            
            setTimeout(() => {
                // Connected phase
                callStatus.innerHTML = 'üü¢ Conectado';
                callStatus.className = 'text-green-300';
                
                // Add some simulated patient responses
                setTimeout(() => {
                    addVideoCallSystemMessage(`${currentChatPatient} se ha unido a la videollamada`);
                }, 2000);
                
                setTimeout(() => {
                    addVideoCallSystemMessage('Grabaci√≥n iniciada autom√°ticamente');
                }, 3000);
                
            }, 2000);
        }

        function resetVideoCallControls() {
            micMuted = false;
            cameraOff = false;
            screenSharing = false;
            recording = true; // Auto-start recording
            videoChatOpen = false;
            
            document.getElementById('micIcon').textContent = 'üé§';
            document.getElementById('micButton').classList.remove('bg-red-600');
            document.getElementById('micButton').classList.add('bg-gray-600');
            
            document.getElementById('cameraIcon').textContent = 'üìπ';
            document.getElementById('cameraButton').classList.remove('bg-red-600');
            document.getElementById('cameraButton').classList.add('bg-gray-600');
            
            document.getElementById('screenShareIcon').textContent = 'üñ•Ô∏è';
            document.getElementById('screenShareButton').classList.remove('bg-blue-600');
            document.getElementById('screenShareButton').classList.add('bg-gray-600');
            
            document.getElementById('recordIcon').textContent = '‚èπÔ∏è';
            document.getElementById('recordButton').classList.remove('bg-gray-600');
            document.getElementById('recordButton').classList.add('bg-red-600');
            
            document.getElementById('videoCallChatPanel').classList.add('hidden');
        }

        function endVideoCall() {
            if (confirm('¬øEst√° seguro de que desea finalizar la videollamada?')) {
                // Clear timer
                if (callTimer) {
                    clearInterval(callTimer);
                    callTimer = null;
                }
                
                // Hide video call interface
                document.getElementById('videoCallInterface').classList.add('hidden');
                
                // Show call summary
                const callDuration = document.getElementById('callDuration').textContent;
                setTimeout(() => {
                    alert(`üìû Videollamada finalizada\n\nüë§ Paciente: ${currentChatPatient}\n‚è±Ô∏è Duraci√≥n: ${callDuration}\nüìπ Grabaci√≥n guardada\nüìã Notas disponibles en el historial\n\n‚úÖ La consulta virtual ha sido registrada exitosamente.`);
                }, 500);
            }
        }

        function toggleMicrophone() {
            micMuted = !micMuted;
            const micIcon = document.getElementById('micIcon');
            const micButton = document.getElementById('micButton');
            
            if (micMuted) {
                micIcon.textContent = 'üîá';
                micButton.classList.remove('bg-gray-600');
                micButton.classList.add('bg-red-600');
                addVideoCallSystemMessage('Micr√≥fono silenciado');
            } else {
                micIcon.textContent = 'üé§';
                micButton.classList.remove('bg-red-600');
                micButton.classList.add('bg-gray-600');
                addVideoCallSystemMessage('Micr√≥fono activado');
            }
        }

        function toggleCamera() {
            cameraOff = !cameraOff;
            const cameraIcon = document.getElementById('cameraIcon');
            const cameraButton = document.getElementById('cameraButton');
            
            if (cameraOff) {
                cameraIcon.textContent = 'üì∑';
                cameraButton.classList.remove('bg-gray-600');
                cameraButton.classList.add('bg-red-600');
                addVideoCallSystemMessage('C√°mara desactivada');
            } else {
                cameraIcon.textContent = 'üìπ';
                cameraButton.classList.remove('bg-red-600');
                cameraButton.classList.add('bg-gray-600');
                addVideoCallSystemMessage('C√°mara activada');
            }
        }

        function toggleScreenShare() {
            screenSharing = !screenSharing;
            const screenShareIcon = document.getElementById('screenShareIcon');
            const screenShareButton = document.getElementById('screenShareButton');
            
            if (screenSharing) {
                screenShareIcon.textContent = 'üñ•Ô∏è';
                screenShareButton.classList.remove('bg-gray-600');
                screenShareButton.classList.add('bg-blue-600');
                addVideoCallSystemMessage('Compartiendo pantalla');
            } else {
                screenShareIcon.textContent = 'üñ•Ô∏è';
                screenShareButton.classList.remove('bg-blue-600');
                screenShareButton.classList.add('bg-gray-600');
                addVideoCallSystemMessage('Pantalla compartida detenida');
            }
        }

        function toggleRecording() {
            recording = !recording;
            const recordIcon = document.getElementById('recordIcon');
            const recordButton = document.getElementById('recordButton');
            
            if (recording) {
                recordIcon.textContent = '‚èπÔ∏è';
                recordButton.classList.remove('bg-gray-600');
                recordButton.classList.add('bg-red-600');
                addVideoCallSystemMessage('Grabaci√≥n iniciada');
            } else {
                recordIcon.textContent = '‚è∫Ô∏è';
                recordButton.classList.remove('bg-red-600');
                recordButton.classList.add('bg-gray-600');
                addVideoCallSystemMessage('Grabaci√≥n detenida');
            }
        }

        function toggleVideoCallChat() {
            videoChatOpen = !videoChatOpen;
            const chatPanel = document.getElementById('videoCallChatPanel');
            
            if (videoChatOpen) {
                chatPanel.classList.remove('hidden');
            } else {
                chatPanel.classList.add('hidden');
            }
        }

        function openVideoSettings() {
            alert('‚öôÔ∏è Configuraci√≥n de Videollamada\n\nEn una aplicaci√≥n real, esto abrir√≠a:\n\nüìπ Configuraci√≥n de C√°mara:\n‚Ä¢ Resoluci√≥n de video\n‚Ä¢ Brillo y contraste\n‚Ä¢ Selecci√≥n de c√°mara\n\nüé§ Configuraci√≥n de Audio:\n‚Ä¢ Micr√≥fono principal\n‚Ä¢ Cancelaci√≥n de ruido\n‚Ä¢ Volumen de entrada\n\nüåê Configuraci√≥n de Red:\n‚Ä¢ Calidad de video adaptativa\n‚Ä¢ Ancho de banda\n‚Ä¢ Servidor de conexi√≥n');
        }

        function sendVideoCallMessage() {
            const input = document.getElementById('videoCallChatInput');
            const message = input.value.trim();
            
            if (message) {
                const messagesContainer = document.getElementById('videoCallMessages');
                const messageDiv = document.createElement('div');
                messageDiv.className = 'mb-3 text-right';
                
                const now = new Date();
                const timeString = now.toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' });
                
                messageDiv.innerHTML = `
                    <div class="inline-block max-w-xs px-3 py-2 rounded-lg bg-blue-600 text-white text-sm">
                        <p>${message}</p>
                        <p class="text-xs mt-1 text-blue-100">${timeString}</p>
                    </div>
                `;
                
                messagesContainer.appendChild(messageDiv);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
                
                input.value = '';
                
                // Simulate patient response in video call chat
                setTimeout(() => {
                    simulateVideoCallPatientResponse();
                }, 1500);
            }
        }

        function simulateVideoCallPatientResponse() {
            const responses = [
                'Entiendo doctor, gracias por la explicaci√≥n',
                'S√≠, me siento mejor desde la √∫ltima consulta',
                'Perfecto, seguir√© las indicaciones',
                'Gracias por tomarse el tiempo para la videollamada',
                'Me tranquiliza poder hablar con usted directamente'
            ];
            
            const randomResponse = responses[Math.floor(Math.random() * responses.length)];
            const messagesContainer = document.getElementById('videoCallMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'mb-3 text-left';
            
            const now = new Date();
            const timeString = now.toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' });
            
            messageDiv.innerHTML = `
                <div class="inline-block max-w-xs px-3 py-2 rounded-lg bg-gray-200 text-gray-800 text-sm">
                    <p>${randomResponse}</p>
                    <p class="text-xs mt-1 text-gray-500">${timeString}</p>
                </div>
            `;
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function handleVideoCallChatKeyPress(event) {
            if (event.key === 'Enter') {
                sendVideoCallMessage();
            }
        }

        function addVideoCallSystemMessage(message) {
            if (videoChatOpen) {
                const messagesContainer = document.getElementById('videoCallMessages');
                const messageDiv = document.createElement('div');
                messageDiv.className = 'mb-3 text-center';
                
                const now = new Date();
                const timeString = now.toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' });
                
                messageDiv.innerHTML = `
                    <div class="inline-block px-3 py-1 rounded-full bg-yellow-100 text-yellow-800 text-xs">
                        ${message} ‚Ä¢ ${timeString}
                    </div>
                `;
                
                messagesContainer.appendChild(messageDiv);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }
        }

        function startVoiceCall() {
            if (currentChatPatient) {
                alert(`üìû Iniciando llamada de voz con ${currentChatPatient}...\n\nEn una aplicaci√≥n real, esto iniciar√≠a una llamada de voz con:\n‚Ä¢ Audio de alta calidad\n‚Ä¢ Grabaci√≥n de llamada\n‚Ä¢ Notas durante la llamada`);
            } else {
                alert('Seleccione un paciente primero.');
            }
        }

        function attachFile() {
            alert('üìé Adjuntar archivo...\n\nEn una aplicaci√≥n real, esto permitir√≠a adjuntar:\n‚Ä¢ Im√°genes de estudios m√©dicos\n‚Ä¢ Documentos PDF\n‚Ä¢ Resultados de laboratorio\n‚Ä¢ Recetas digitales');
        }

        function insertEmoji() {
            const emojis = ['üòä', 'üëç', '‚ù§Ô∏è', 'üôè', 'üíä', 'üè•', 'üìã', '‚úÖ'];
            const randomEmoji = emojis[Math.floor(Math.random() * emojis.length)];
            const input = document.getElementById('chatInput');
            input.value += randomEmoji;
            input.focus();
        }

        function sendBroadcastMessage() {
            const message = prompt('Escriba el mensaje que desea enviar a todos los pacientes:');
            if (message) {
                alert(`üì¢ Mensaje grupal enviado a todos los pacientes:\n\n"${message}"\n\nEn una aplicaci√≥n real, esto enviar√≠a el mensaje a todos los pacientes activos.`);
            }
        }

        function scheduleReminder() {
            alert('‚è∞ Programar Recordatorio\n\nEn una aplicaci√≥n real, esto abrir√≠a un formulario para:\n‚Ä¢ Seleccionar pacientes\n‚Ä¢ Establecer fecha y hora\n‚Ä¢ Escribir mensaje de recordatorio\n‚Ä¢ Configurar repetici√≥n\n‚Ä¢ Env√≠o autom√°tico');
        }

        function viewChatHistory() {
            alert('üìã Historial Completo de Chats\n\nEn una aplicaci√≥n real, esto mostrar√≠a:\n‚Ä¢ Todas las conversaciones\n‚Ä¢ B√∫squeda por paciente o fecha\n‚Ä¢ Exportar conversaciones\n‚Ä¢ Estad√≠sticas de comunicaci√≥n\n‚Ä¢ Mensajes archivados');
        }
    </script>

</body>
</html>

<footer class="bg-gray-800 text-white py-12">
    <div class="container mx-auto px-6">
        <div class="grid md:grid-cols-4 gap-8">
            <div>
                <div class="flex items-center space-x-3 mb-4">
                    <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center">
                        <span class="text-white font-bold">J</span>
                    </div>
                    <h4 class="text-xl font-bold">Jarelux</h4>
                </div>
                <p class="text-gray-400">Conectando pacientes con c√°ncer con descuentos que marcan la diferencia en su tratamiento.</p>
            </div>
            <div>
                <h5 class="font-semibold mb-4">Servicios</h5>
                <ul class="space-y-2 text-gray-400">
                    <li><a href="#" class="hover:text-white transition-colors">Farmacias</a></li>
                    <li><a href="#" class="hover:text-white transition-colors">Cl√≠nicas</a></li>
                    <li><a href="#" class="hover:text-white transition-colors">Hospitales</a></li>
                    <li><a href="#" class="hover:text-white transition-colors">Laboratorios</a></li>
                </ul>
            </div>
            <div>
                <h5 class="font-semibold mb-4">Soporte</h5>
                <ul class="space-y-2 text-gray-400">
                    <li><a href="#" class="hover:text-white transition-colors">Centro de Ayuda</a></li>
                    <li><a href="#" class="hover:text-white transition-colors">Preguntas Frecuentes</a></li>
                    <li><a href="#" class="hover:text-white transition-colors">Contacto</a></li>
                    <li><a href="#" class="hover:text-white transition-colors">T√©rminos y Condiciones</a></li>
                </ul>
            </div>
            <div>
                <h5 class="font-semibold mb-4">Contacto</h5>
                <div class="space-y-2 text-gray-400">
                    <p>üìû 01-800-JARELUX</p>
                    <p>‚úâÔ∏è info@jarelux.com</p>
                    <p>üìç Ciudad de M√©xico, M√©xico</p>
                </div>
            </div>
        </div>
        <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
            <p>&copy; 2025 Jarelux. Todos los derechos reservados.</p>
        </div>
    </div>
</footer>
</body>
</html
